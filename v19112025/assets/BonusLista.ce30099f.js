import{_ as ue,ar as W,r as D,o as b,p as h,f as o,bJ as me,w as t,P as se,F as Z,x as fe,d as y,S as U,T as p,C as c,U as g,k as r,t as f,m as z,j as x,e as q,Q as w,bf as ce,H as pe,N as be,l as Ve,M as ge,L as ve,E as Ce,G as xe,h as ye,i as we,I as ke,J as De,K as he,br as qe,D as Ee}from"./index.ddbcd6b2.js";import{L as Fe}from"./Lista.b4055103.js";import{S as Ue}from"./SeletorEmpresa.684e8f64.js";const ze=()=>{const e=new Date;e.setDate(e.getDate()+1),e.setHours(0,0,0,0);const n=60,d=new Date(e);return d.setDate(d.getDate()+n),d.setHours(0,0,0,0),{visivel:!0,dadosEmpresa:{},id:$utils.uuid(),nomeCliente:"",cpfCliente:"",whatsappCliente:"",diasMinimoUso:1,dataInicioValidade:W.formatDate(e),diasExpiracao:n,dataVencimento:W.formatDate(d),valor:1,valorMinimoVenda:10,observacao:"",textoRegras:""}},Me={components:{Lista:Fe,SeletorEmpresa:Ue},data(){return{usuario:"",lista:[],cores:{Ativo:"positive",Utilizado:"tertiary",Vencido:"orange",Cancelado:"negative"},mostrar:{header:!0,barraTopo:!0,toolbarTitulo:!0,icone:"card_giftcard",titulo:"B\xF4nus",buscar:!0,filtroAvancado:!0,btnAjuda:!0,btnAtualizar:!0,btnNovo:!0,toolbarAcoes:!0,checkBox:!1,btnRemover:!1,btnRestaurar:!1,centralizaTabs:!1,btnDetalhes:!0,btnExportaXLS:!1,btnMenuMais:!1,toolbarAdicao:!1,bannerMsg:"",conexao:{icone:"online",iconeTamanho:"xs",cor:"grey-5",rotulo:null,dica:"Online",denso:!0,flat:!0,escuro:!1}},busca:"",contatoEmpresas:[],filtrosOriginal:{},filtros:{tokenBonus:"",nomeCliente:"",cpfCliente:"",whatsappCliente:"",idEmpresa:"",cpfUsuarioEmissor:"",idDocumentoOrigem:"",dataVencimento:{ini:"",fim:""},dataHoraCriacao:{ini:"",fim:""},dataInicioValidade:{ini:"",fim:""},dataHoraFinalizado:{ini:"",fim:""},valor:0,valorMinimoVenda:0,ordenacao:"dataHoraCriacao",direcao:"desc"},opcoesVendedores:[],ordenacaoOpcoes:[{value:"dataHoraCriacao",label:"Data Cria\xE7\xE3o"},{value:"dataInicioValidade",label:"Data Cria\xE7\xE3o"},{value:"dataHoraFinalizado",label:"Data Finalizado"},{value:"dataVencimento",label:"Data Vencimento"}],direcaoOpcoes:[{value:"asc",label:"Crescente"},{value:"desc",label:"Decrescente"}],detalhes:!1,tabSelecionada:{valor:"Ativo"},tabs:[{valor:"Ativo",rotulo:"Ativos"},{valor:"Utilizado",rotulo:"Utilizados"},{valor:"Vencido",rotulo:"Vencidos"},{valor:"Cancelado",rotulo:"Cancelados"},{valor:"Todos",rotulo:"Todos"}],paginacao:{atual:1,maximo:1,total:1,limite:25},bonus:{},dataAtual:$utils.dataAtual(),tela:{width:0,heihgt:0}}},methods:{async atualizar(s){var e,n,d,l,m,u,B,k,H,A,v,V,I,G,a,E,S,N,L,O,Q,T,P,j,J,_,R,$,ee,oe,ae,le,te;try{$q.loading.show(),this.lista=[],this.tabSelecionadaAnt!==this.tabSelecionada.valor&&(this.paginacao.atual=1),this.tabSelecionadaAnt=this.tabSelecionada.valor;let{buscarDadosRecentes:X}=s!=null?s:{},i={},M={};X&&(i=await $utils.localIDB.getItem({objectStore:"dadosRecentes",id:"BonusLista_"+((e=this.usuario)==null?void 0:e.id)}),i!=null&&i._id&&(this.tabSelecionada.valor=(i==null?void 0:i.tabSelecionada)||"Ativo",this.busca=(i==null?void 0:i.busca)||"",this.filtros={tokenBonus:((n=i==null?void 0:i.filtros)==null?void 0:n.tokenBonus)||"",nomeCliente:((d=i==null?void 0:i.filtros)==null?void 0:d.nomeCliente)||"",cpfCliente:((l=i==null?void 0:i.filtros)==null?void 0:l.cpfCliente)||"",whatsappCliente:((m=i==null?void 0:i.filtros)==null?void 0:m.whatsappCliente)||"",idEmpresa:((u=i==null?void 0:i.filtros)==null?void 0:u.idEmpresa)||"",cpfUsuarioEmissor:((B=i==null?void 0:i.filtros)==null?void 0:B.cpfUsuarioEmissor)||"",idDocumentoOrigem:((k=i==null?void 0:i.filtros)==null?void 0:k.idDocumentoOrigem)||"",dataVencimento:{ini:((A=(H=i==null?void 0:i.filtros)==null?void 0:H.dataVencimento)==null?void 0:A.ini)||"",fim:((V=(v=i==null?void 0:i.filtros)==null?void 0:v.dataVencimento)==null?void 0:V.fim)||""},dataHoraCriacao:{ini:((G=(I=i==null?void 0:i.filtros)==null?void 0:I.dataHoraCriacao)==null?void 0:G.ini)||"",fim:((E=(a=i==null?void 0:i.filtros)==null?void 0:a.dataHoraCriacao)==null?void 0:E.fim)||""},dataInicioValidade:{ini:((N=(S=i==null?void 0:i.filtros)==null?void 0:S.dataInicioValidade)==null?void 0:N.ini)||"",fim:((O=(L=i==null?void 0:i.filtros)==null?void 0:L.dataInicioValidade)==null?void 0:O.fim)||""},dataHoraFinalizado:{ini:((T=(Q=i==null?void 0:i.filtros)==null?void 0:Q.dataHoraFinalizado)==null?void 0:T.ini)||"",fim:((j=(P=i==null?void 0:i.filtros)==null?void 0:P.dataHoraFinalizado)==null?void 0:j.fim)||""},valor:((J=i==null?void 0:i.filtros)==null?void 0:J.valor)||0,valorMinimoVenda:((_=i==null?void 0:i.filtros)==null?void 0:_.valorMinimoVenda)||0,ordenacao:((R=i==null?void 0:i.filtros)==null?void 0:R.ordenacao)||"dataHoraCriacao",direcao:(($=i==null?void 0:i.filtros)==null?void 0:$.direcao)||"desc"},this.compareObject(this.filtrosOriginal,this.filtros,["ordenacao","direcao"])&&(this.$refs.bonusLista.filtros=!0))),M=$utils.eliminarVazios(this.filtros),delete M.status,this.tabSelecionada.valor!=="Todos"&&(M.status=this.tabSelecionada.valor),this.busca&&(this.paginacao.atual=1,/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(this.busca)?(this.tabSelecionada.valor="Todos",M={id:this.busca}):M.termoBusca=this.busca);const ne=[this.filtros.ordenacao],re=[this.filtros.direcao],K=await $db.bonus.leListaCompleta({filtros:M,limit:this.paginacao.limite,page:this.paginacao.atual,sort:ne,dir:re}),de=(ee=await $db.hibrido.lista({table:"documento",columns:["id","numero","tokenBonusGerado"],where:{tipo:"Fatura"}}))!=null?ee:[],ie={};for(const C of de){if(!(C!=null&&C.tokenBonusGerado))continue;const F=C==null?void 0:C.tokenBonusGerado.split(",").map(Y=>Y.trim());for(const Y of F)ie[Y]=C}for(const C of K.data){const F=(oe=ie[C.tokenBonus])!=null?oe:{};C.detalhes=!1,C.idFatura=(ae=F==null?void 0:F.id)!=null?ae:"",C.numeroFatura=(le=F==null?void 0:F.numero)!=null?le:null}this.$refs.bonusLista.detalhes=!1,this.lista=K.data,this.paginacao.total=K.total,this.paginacao.maximo=K.totalPages,i={_id:"BonusLista_"+((te=this.usuario)==null?void 0:te.id),tabSelecionada:this.tabSelecionada.valor,busca:this.busca,filtros:$utils.clonar(this.filtros)},await $utils.localIDB.setItem({objectStore:"dadosRecentes",data:i})}catch(X){$q.notifyError("Erro iniciar",X)}finally{$q.loading.hide()}},async contatoEmpresasCarregar(){this.contatoEmpresas=await $db.contatoEmpresa.listaCache()},async criarClick(){this.bonus=ze(),this.bonus.dadosEmpresa=this.contatoEmpresas[0]},validacao(s,e){if(s==="diasMinimoUso"){const n=Number(e.diasMinimoUso),d=new Date(this.dataAtual);(!n||n<0)&&(e.diasMinimoUso=1),d.setDate(d.getDate()+n),d.setHours(0,0,0,0),e.dataInicioValidade=W.formatDate(d);return}if(s==="dataInicioValidade"){const n=new Date(e.dataInicioValidade),d=new Date(e.dataVencimento),l=new Date(this.dataAtual),m=Number(e.diasExpiracao);if(!n||isNaN(n))return"Defina a data de in\xEDcio.";n.setHours(0,0,0,0)<l&&(e.dataInicioValidade=l);const u=n-new Date(l);e.diasMinimoUso=Math.ceil(u/1e3/60/60/24),n.setDate(n.getDate()+m),n.setHours(0,0,0,0),e.dataVencimento=W.formatDate(n),d.setHours(0,0,0,0)<=l.setHours(0,0,0,0)&&(e.dataVencimento=n.setHours(0,0,0,0)>=l.setHours(0,0,0,0)?n:l),d.setHours(0,0,0,0)<=n.setHours(0,0,0,0)&&(e.dataVencimento=n.setHours(0,0,0,0)>=l.setHours(0,0,0,0)?n:l);return}if(s==="diasExpiracao"){const n=Number(e.diasExpiracao),d=new Date(e.dataInicioValidade);(!n||n<0)&&(e.diasExpiracao=1),d.setDate(d.getDate()+n),d.setHours(0,0,0,0),e.dataVencimento=W.formatDate(d);return}if(s==="dataVencimento"){const n=new Date(e.dataInicioValidade),d=new Date(e.dataVencimento),l=new Date(this.dataAtual);if(Number(e.diasExpiracao),!d||isNaN(d))return"Defina a data de vencimento.";const m=d-new Date(n);return e.diasExpiracao=Math.ceil(m/1e3/60/60/24),d.setHours(0,0,0,0)<=l.setHours(0,0,0,0)?(e.dataVencimento=n.setHours(0,0,0,0)>=l.setHours(0,0,0,0)?n:l,"A vig\xEAncia deve ser maior ou igual \xE0 data atual"):d.setHours(0,0,0,0)<n.setHours(0,0,0,0)?(e.dataVencimento=n>=l?n:l,"A vig\xEAncia at\xE9 deve ser maior ou igual \xE0 vig\xEAncia de"):void 0}if(s==="valor")return!e.valor||e.valor<0?(this.bonus.valor=0,"Valor deve ser maior que R$ 0,00"):void 0;if(s==="valorMinimoVenda")return e.valorMinimoVenda<0?(this.bonus.valorMinimoVenda=1,"Valor n\xE3o pode ser negativo."):void 0},fecharBonus(){this.bonus={}},async salvarBonus(){await $tryLoading("Salvando...",async()=>{var s,e;await $utils.geeksApi({geraBonusManual:{funcao:"8FC942DF-1793-48EA-8DEE-9D19909EF233",valor:this.bonus.valor,funcao:"8FC942DF-1793-48EA-8DEE-9D19909EF233",dataInicioValidade:this.bonus.dataInicioValidade,dataVencimento:this.bonus.dataVencimento,cnpjEmissor:(s=this.bonus.dadosEmpresa)==null?void 0:s.numeroDocumentoNacional,nomeEmissor:(e=this.bonus.dadosEmpresa)==null?void 0:e.apelido,cpfCliente:this.bonus.cpfCliente,nomeCliente:this.bonus.nomeCliente,whatsappCliente:this.bonus.whatsappCliente,valor:this.bonus.valor,valorMinimoVenda:this.bonus.valorMinimoVenda,observacao:this.bonus.observacao,textoRegras:this.bonus.textoRegras}}),this.bonus={},await this.atualizar(),$q.notifyPositive("B\xF4nus criado com sucesso")})},async cancelarBonus(s){!await $q.dialogSimNao({title:"Cancelar B\xF4nus",message:`Deseja cancelar o B\xF4nus de R$ ${$filters.numero(s.valor,2)} para ${s.nomeCliente}?`})||await $tryLoading("Cancelando...",async()=>{var n,d;const e=await $utils.geeksApi({cancelaBonus:{funcao:"459C0A26-6F81-4B5D-B427-B915142C6283",id:s.id}});$q.notifyPositive(((d=(n=e.data)==null?void 0:n.cancelaBonus)==null?void 0:d.mensagem)||"B\xF4nus cancelado com sucesso"),await this.atualizar()})},detalhesClick(){this.detalhes=!this.detalhes,this.lista.forEach(s=>{s.detalhes=this.detalhes})},abrirFecharDetalhes(s){s.detalhes=!s.detalhes},async limparFiltrosClick(){this.filtros=$utils.clonar(this.filtrosOriginal),await this.atualizar()},async abrirModalCliente(){var e,n;const s=await $g.promptContato.show({filtro:{ativo:!0}});!(s!=null&&s.id)||(this.bonus.cpfCliente=s.numeroDocumentoNacional,this.bonus.nomeCliente=s.nome,this.bonus.whatsappCliente=(n=(e=await $db.hibrido.lista({table:"contatoTelefone",where:{idContato:s==null?void 0:s.id},whereFilter:{tipoTelefone:"WhatsApp"}}))==null?void 0:e[0])==null?void 0:n.telefone)},async abrirModalContatoFiltro(){const s=await $g.promptContato.show({filtro:{ativo:!0}});!(s!=null&&s.id)||(this.filtros.nomeCliente=s.nome)},compareObject(s,e,n=[]){const d=Object.keys(s);for(const l of d)if(!n.includes(l)){if(typeof s[l]=="object"&&s[l]!==null){if(!this.compareObject(s[l],e[l],n))continue;return!0}else if(s[l]!==e[l])return!0}return!1},async configurarVendedores(){const s=(await $db.contato.ler({filtros:{ativo:!0,vendedores:!0}})).data;s==null||s.sort((e,n)=>{var d;return(d=e==null?void 0:e.nome)==null?void 0:d.localeCompare(n==null?void 0:n.nome)}),s.forEach(e=>{e.numeroDocumentoNacional&&this.opcoesVendedores.push({label:e.nome,value:e.numeroDocumentoNacional})})},resize(){const s=document.getElementById("BonusLista");s&&(this.tela={width:s.offsetWidth,height:s.offsetHeight})},limparCliente(){this.bonus.cpfCliente="",this.bonus.nomeCliente="",this.bonus.whatsappCliente=""}},async mounted(){this.usuario=JSON.parse(localStorage.getItem("usuario")),this.filtrosOriginal=$utils.clonar(this.filtros),this.contatoEmpresasCarregar(),await this.configurarVendedores(),await this.atualizar({buscarDadosRecentes:!0})}},Be={id:"BonusLista"},He={class:"mw80 text-center"},Ae={key:0},Ie={key:1},Se={key:0},Ne={class:"text-weight-medium q-pl-xs"},Le={key:1},Oe={class:"text-weight-medium q-px-sm"},Qe={class:"text-center"},Te={class:"text-center"};function Pe(s,e,n,d,l,m){const u=D("campo"),B=D("SeletorEmpresa"),k=D("BadgeCopiarUid"),H=D("avatar"),A=D("badge"),v=D("g-label"),V=D("g-col"),I=D("g-row"),G=D("Lista");return b(),h("div",Be,[o(me,{onResize:e[0]||(e[0]=a=>m.resize())}),o(G,{ref:"bonusLista",busca:l.busca,"onUpdate:busca":e[20]||(e[20]=a=>l.busca=a),onAtualizar:m.atualizar,onCriarClick:m.criarClick,onDetalhesClick:m.detalhesClick,onLimparFiltrosClick:m.limparFiltrosClick,lista:l.lista,tabSelecionada:l.tabSelecionada,tabs:l.tabs,paginacao:l.paginacao,mostrar:l.mostrar},{filtroCampos:t(()=>[o(u,{modelValue:l.filtros.tokenBonus,"onUpdate:modelValue":e[1]||(e[1]=a=>l.filtros.tokenBonus=a),clearable:"",dense:"",tipo:"texto",rotulo:"Token do B\xF4nus",class:"q-mt-sm q-mb-md"},null,8,["modelValue"]),o(u,{modelValue:l.filtros.nomeCliente,"onUpdate:modelValue":e[2]||(e[2]=a=>l.filtros.nomeCliente=a),debounce:500,dense:"",before:[{icon:"search",handler:m.abrirModalContatoFiltro}],rotulo:"Cliente",class:"col-12 q-mt-md"},null,8,["modelValue","before"]),o(u,{modelValue:l.filtros.whatsappCliente,"onUpdate:modelValue":e[3]||(e[3]=a=>l.filtros.whatsappCliente=a),clearable:"",dense:"",tipo:"numero",rotulo:"WhatsApp",class:"q-mt-lg"},null,8,["modelValue"]),o(B,{modelValue:l.filtros.dadosEmpresa,"onUpdate:modelValue":e[4]||(e[4]=a=>l.filtros.dadosEmpresa=a),rotulo:"Por empresa",chaves:["id","nome","apelido","numeroDocumentoNacional"],class:"q-mt-md"},null,8,["modelValue"]),o(u,{modelValue:l.filtros.cpfUsuarioEmissor,"onUpdate:modelValue":e[5]||(e[5]=a=>l.filtros.cpfUsuarioEmissor=a),options:l.opcoesVendedores,clearable:"",dense:"",tipo:"seletor",rotulo:"Vendedor"},null,8,["modelValue","options"]),o(u,{modelValue:l.filtros.idDocumentoOrigem,"onUpdate:modelValue":e[6]||(e[6]=a=>l.filtros.idDocumentoOrigem=a),clearable:"",dense:"",tipo:"texto",rotulo:"ID Doc. Origem",class:"q-mt-md"},null,8,["modelValue"]),o(u,{modelValue:l.filtros.dataVencimento.ini,"onUpdate:modelValue":e[7]||(e[7]=a=>l.filtros.dataVencimento.ini=a),clearable:"",dense:"",tipo:"data",rotulo:"Vencimento de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),o(u,{modelValue:l.filtros.dataVencimento.fim,"onUpdate:modelValue":e[8]||(e[8]=a=>l.filtros.dataVencimento.fim=a),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),o(u,{modelValue:l.filtros.dataHoraCriacao.ini,"onUpdate:modelValue":e[9]||(e[9]=a=>l.filtros.dataHoraCriacao.ini=a),clearable:"",dense:"",tipo:"data",rotulo:"Emiss\xE3o de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),o(u,{modelValue:l.filtros.dataHoraCriacao.fim,"onUpdate:modelValue":e[10]||(e[10]=a=>l.filtros.dataHoraCriacao.fim=a),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),o(u,{modelValue:l.filtros.dataInicioValidade.ini,"onUpdate:modelValue":e[11]||(e[11]=a=>l.filtros.dataInicioValidade.ini=a),clearable:"",dense:"",tipo:"data",rotulo:"Inicio validade de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),o(u,{modelValue:l.filtros.dataInicioValidade.fim,"onUpdate:modelValue":e[12]||(e[12]=a=>l.filtros.dataInicioValidade.fim=a),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),o(u,{modelValue:l.filtros.dataHoraFinalizado.ini,"onUpdate:modelValue":e[13]||(e[13]=a=>l.filtros.dataHoraFinalizado.ini=a),clearable:"",dense:"",tipo:"data",rotulo:"Finalizado de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),o(u,{modelValue:l.filtros.dataHoraFinalizado.fim,"onUpdate:modelValue":e[14]||(e[14]=a=>l.filtros.dataHoraFinalizado.fim=a),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),o(u,{modelValue:l.filtros.valor,"onUpdate:modelValue":e[15]||(e[15]=a=>l.filtros.valor=a),dense:"",tipo:"decimal",min:"0",decimals:"4",zerosDireita:"2",rotulo:"Valor b\xF4nus",class:"col-12 q-mt-xl"},null,8,["modelValue"]),o(u,{modelValue:l.filtros.valorMinimoVenda,"onUpdate:modelValue":e[16]||(e[16]=a=>l.filtros.valorMinimoVenda=a),dense:"",tipo:"decimal",min:"0",decimals:"4",zerosDireita:"2",rotulo:"Valor m\xEDnimo da compra",class:"col-12 q-mt-sm"},null,8,["modelValue"]),o(u,{modelValue:l.filtros.ordenacao,"onUpdate:modelValue":e[17]||(e[17]=a=>l.filtros.ordenacao=a),options:l.ordenacaoOpcoes,dense:"",rotuloFixo:"Ordenar por",tipo:"seletor",class:"q-mt-xl"},null,8,["modelValue","options"]),o(u,{modelValue:l.filtros.direcao,"onUpdate:modelValue":e[18]||(e[18]=a=>l.filtros.direcao=a),options:l.direcaoOpcoes,dense:"",rotuloFixo:"Dire\xE7\xE3o",tipo:"seletor",class:"q-mt-sm"},null,8,["modelValue","options"]),o(u,{modelValue:l.paginacao.limite,"onUpdate:modelValue":e[19]||(e[19]=a=>l.paginacao.limite=a),tipo:"quantidade",min:"1",dense:"",rotulo:"Quantidade por p\xE1gina",class:"q-mt-xl q-mb-md"},null,8,["modelValue"])]),itemLista:t(()=>[o(se,{bordered:"",class:"bg-white q-mb-xs rounded-borders"},{default:t(()=>[(b(!0),h(Z,null,fe(l.lista,a=>(b(),h("div",{key:a.id,class:"itemHover"},[a.id?(b(),y(U,{key:0,"manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:t(()=>[o(p,{class:"hideonmobile col-auto no-margin"},{default:t(()=>[o(U,{class:"q-pa-none"},{default:t(()=>[o(p,{side:"",class:"col-auto q-pa-none"},{default:t(()=>[c("div",He,[o(k,{id:a.id,escuro:"",cor:l.cores[a.status],dica:"ID B\xF4nus"},null,8,["id","cor"])])]),_:2},1024)]),_:2},1024)]),_:2},1024),o(p,{class:"col-xs col-sm no-margin"},{default:t(()=>[o(U,{class:"q-pa-none"},{default:t(()=>[o(p,{class:"hideonmobile col-auto items-center cursor-pointer"},{default:t(()=>[o(H,{rotulo:a.nomeCliente,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1024),o(p,{top:"",class:"hideondesktop col-auto items-center cursor-pointer"},{default:t(()=>[o(H,{rotulo:a.nomeCliente,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1024),o(p,{class:"col"},{default:t(()=>[o(g,{lines:"3",class:"text-weight-bold cursor-pointer"},{default:t(()=>[a.cpfCliente?(b(),h("span",Ae,[r(f(a.nomeCliente||a.cpfCliente)+" ",1),o(z,{anchor:"bottom middle",self:"center middle"},{default:t(()=>e[45]||(e[45]=[r("Cliente")])),_:1})])):(b(),h("span",Ie,f(a.nomeCliente?a.nomeCliente+" - ":"")+" Utiliza\xE7\xE3o para qualquer cliente ",1))]),_:2},1024),o(g,{caption:"",lines:"3",class:"cursor-pointer"},{default:t(()=>[a.cnpjEmissor?(b(),h("span",Se,[o(x,{name:"business",class:"q-mr-xs"}),r(" "+f(a.nomeEmissor)+" ",1),c("span",Ne,"("+f(a.cnpjEmissor)+")",1),o(z,{anchor:"bottom middle",self:"center middle"},{default:t(()=>e[46]||(e[46]=[r("Emissor")])),_:1})])):(b(),h("span",Le,[o(x,{name:"business",class:"q-mr-xs"}),e[47]||(e[47]=r(" Todas as empresas "))]))]),_:2},1024),o(g,{caption:"",lines:"3"},{default:t(()=>[c("span",null,[o(x,{name:"person"}),c("span",Oe,f(a.nomeUsuarioEmissor),1),o(z,{anchor:"bottom start",self:"center start"},{default:t(()=>e[48]||(e[48]=[r("Usuario")])),_:1})])]),_:2},1024),o(p,{class:"hideondesktop"},{default:t(()=>[o(g,{caption:"",class:"q-my-none"},{default:t(()=>[o(k,{id:a.id,cor:l.cores[a.status],escuro:"",class:"col-auto q-my-xs q-mr-sm"},null,8,["id","cor"]),a.numeroFatura?(b(),y(k,{key:0,id:a.idFatura,numero:a.numeroFatura,escuro:"",icon:"home",cor:"tertiary",class:"col-auto q-my-xs q-mr-sm"},null,8,["id","numero"])):(b(),y(A,{key:1,rotulo:"Manual",cor:"tertiary",escuro:"",class:"col-auto q-my-xs q-mr-sm"})),o(k,{id:a.tokenBonus,textoCompleto:"",escuro:"",cor:"tertiary",class:"col-auto q-my-xs q-mr-sm"},null,8,["id"])]),_:2},1024),o(U,{class:"no-padding no-margin",style:{"min-height":"15px"}},{default:t(()=>[o(p,{class:"col no-margin text-weight-medium"},{default:t(()=>[o(g,{caption:""},{default:t(()=>[o(x,{name:"mdi-calendar-today"}),r(" "+f(s.$filters.data(a.dataInicioValidade)),1)]),_:2},1024),o(g,{caption:""},{default:t(()=>[o(x,{name:"mdi-calendar-today"}),r(" "+f(s.$filters.data(a.dataVencimento)),1)]),_:2},1024)]),_:2},1024),o(p,{top:"",class:"col no-margin text-weight-medium"},{default:t(()=>[a.dataHoraFinalizado?(b(),y(g,{key:0,caption:""},{default:t(()=>[o(x,{name:"mdi-calendar"}),r(" "+f(s.$filters.data(a.dataHoraFinalizado)),1)]),_:2},1024)):q("",!0)]),_:2},1024)]),_:2},1024),o(U,{class:"no-padding no-margin",style:{"min-height":"32px"}},{default:t(()=>[o(p,{class:"col no-margin"},{default:t(()=>[a.valor?(b(),h(Z,{key:0},[o(g,{caption:""},{default:t(()=>e[49]||(e[49]=[r(" Valor B\xF4nus ")])),_:1}),o(g,{caption:"",class:"text-weight-bold"},{default:t(()=>[r(f(s.$filters.numero(a.valor,2)),1)]),_:2},1024)],64)):q("",!0)]),_:2},1024),o(p,{class:"col no-margin"},{default:t(()=>[a.valorMinimoVenda?(b(),h(Z,{key:0},[o(g,{caption:""},{default:t(()=>e[50]||(e[50]=[r(" Valor m\xEDnimo da compra ")])),_:1}),o(g,{caption:"",class:"text-weight-medium"},{default:t(()=>[r(f(s.$filters.numero(a.valorMinimoVenda,2)),1)]),_:2},1024)],64)):q("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),o(p,{class:"hideonmobile maxw80 no-margin cursor-pointer"},{default:t(()=>[c("div",Qe,[a.numeroFatura?(b(),y(k,{key:0,id:a.idFatura,escuro:"",numero:a.numeroFatura,dica:"N\xBA Fatura",cor:"tertiary"},null,8,["id","numero"])):(b(),y(A,{key:1,rotulo:"Manual",cor:"tertiary",escuro:"",dica:"Gerado manualmente"}))])]),_:2},1024),o(p,{class:"hideonmobile maxw80 no-margin cursor-pointer"},{default:t(()=>[c("div",Te,[o(k,{id:a.tokenBonus,dica:"Token do B\xF4nus",textoCompleto:"",semHashtag:"",escuro:"",cor:"tertiary"},null,8,["id"])])]),_:2},1024),o(p,{class:"hideonmobile maxw100 no-margin cursor-pointer"},{default:t(()=>[o(g,{caption:"",class:"text-center text-weight-medium"},{default:t(()=>[c("span",null,[o(x,{name:"mdi-calendar-today"}),r(" "+f(s.$filters.data(a.dataInicioValidade))+" ",1),o(z,{anchor:"bottom middle",self:"center middle"},{default:t(()=>e[51]||(e[51]=[r(" V\xE1lido de ")])),_:1})])]),_:2},1024),o(g,{caption:"",class:"text-center text-weight-medium"},{default:t(()=>[c("span",null,[o(x,{name:"mdi-calendar"}),r(" "+f(s.$filters.data(a.dataVencimento))+" ",1),o(z,{anchor:"bottom middle",self:"center middle"},{default:t(()=>e[52]||(e[52]=[r(" V\xE1lido at\xE9 ")])),_:1})])]),_:2},1024)]),_:2},1024),o(p,{class:"hideonmobile maxw100 no-margin cursor-pointer"},{default:t(()=>[a.dataHoraFinalizado?(b(),y(g,{key:0,caption:"",class:"text-center text-weight-medium"},{default:t(()=>[c("span",null,[o(x,{name:"mdi-calendar"}),r(" "+f(s.$filters.data(a.dataHoraFinalizado))+" ",1),o(z,{anchor:"bottom middle",self:"center middle"},{default:t(()=>[r(f(a.status)+" \xE0s "+f(s.$filters.hora(a.dataHoraFinalizado)),1)]),_:2},1024)])]),_:2},1024)):q("",!0)]),_:2},1024),o(p,{class:"hideonmobile maxw100 q-pl-sm no-margin cursor-pointer"},{default:t(()=>[a.valor?(b(),y(g,{key:0,class:"text-weight-bold text-right"},{default:t(()=>[c("span",null,[r(f(s.$filters.numero(a.valor,2))+" ",1),o(z,{anchor:"bottom middle",self:"center middle"},{default:t(()=>e[53]||(e[53]=[r(" Valor B\xF4nus ")])),_:1})])]),_:2},1024)):q("",!0),a.valorMinimoVenda?(b(),y(g,{key:1,caption:"",class:"text-weight-medium text-right"},{default:t(()=>[c("span",null,[r(f(s.$filters.numero(a.valorMinimoVenda,2))+" ",1),o(z,{anchor:"bottom middle",self:"center middle"},{default:t(()=>e[54]||(e[54]=[r(" Valor m\xEDnimo da compra ")])),_:1})])]),_:2},1024)):q("",!0)]),_:2},1024),o(p,{class:"col-auto no-margin"},{default:t(()=>[o(U,{class:"q-pa-none"},{default:t(()=>[o(p,{class:"hideonmobile no-margin",style:{"max-width":"32px"}},{default:t(()=>[o(w,{onClick:E=>m.abrirFecharDetalhes(a),size:"md",color:"tertiary",round:"",flat:"",dense:"",icon:a.detalhes?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),o(p,{class:"no-margin"},{default:t(()=>[o(w,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:t(()=>[o(ce,null,{default:t(()=>[pe((b(),y(se,{link:"","no-border":"",separator:""},{default:t(()=>[o(U,{onClick:E=>m.cancelarBonus(a),clickable:""},{default:t(()=>[o(p,{avatar:""},{default:t(()=>[o(x,{name:"delete"})]),_:1}),o(p,null,{default:t(()=>[o(g,null,{default:t(()=>e[55]||(e[55]=[r(" Cancelar ")])),_:1})]),_:1})]),_:2},1032,["onClick"]),o(U,{onClick:E=>m.abrirFecharDetalhes(a),clickable:"",class:"hideondesktop"},{default:t(()=>[o(p,{avatar:""},{default:t(()=>[o(x,{name:a.detalhes?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:2},1024),o(p,null,{default:t(()=>e[56]||(e[56]=[r("Mais Detalhes")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)),[[be]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):q("",!0),a.detalhes?(b(),y(I,{key:1,gutter:"md-x lg-y"},{default:t(()=>[o(V,{col:"12 sm5 md3",bordered:""},{default:t(()=>[o(v,{icon:"description xs tertiary left",text:"medium"},{default:t(()=>e[57]||(e[57]=[r("CPF")])),_:1}),o(v,{class:"q-pl-lg"},{default:t(()=>[r(f(a.cpfCliente),1)]),_:2},1024),o(v,{icon:"mdi-whatsapp xs tertiary left",text:"medium"},{default:t(()=>e[58]||(e[58]=[r("WhatsApp")])),_:1}),o(v,{class:"q-pl-lg"},{default:t(()=>[r(f(a.whatsappCliente),1)]),_:2},1024)]),_:2},1024),o(V,{col:"12 sm7 md9",bordered:""},{default:t(()=>[o(v,{icon:"description xs tertiary left",text:"medium"},{default:t(()=>e[59]||(e[59]=[r("Regras")])),_:1}),o(v,{class:"q-pl-lg"},{default:t(()=>[r(f(a.textoRegras),1)]),_:2},1024),o(v,{icon:"description xs tertiary left",text:"medium"},{default:t(()=>e[60]||(e[60]=[r("Observa\xE7\xE3o")])),_:1}),o(v,{class:"q-pl-lg"},{default:t(()=>[r(f(a.observacao),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):q("",!0),a.id?(b(),y(Ve,{key:2})):q("",!0)]))),128))]),_:1})]),_:1},8,["busca","onAtualizar","onCriarClick","onDetalhesClick","onLimparFiltrosClick","lista","tabSelecionada","tabs","paginacao","mostrar"]),o(Ee,{modelValue:l.bonus.visivel,"onUpdate:modelValue":e[43]||(e[43]=a=>l.bonus.visivel=a),onKeyup:e[44]||(e[44]=qe(a=>m.fecharBonus(),["esc"])),maximized:l.tela.width<=992},{default:t(()=>[o(ge,{container:"",view:"hHh LpR fFf",class:"bg-white rounded-borders",style:ve(l.tela.width<=992?"":"max-width:600px;height:100%;max-height:600px;")},{default:t(()=>[o(Ce,{onSubmit:m.salvarBonus,autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",novalidate:""},{default:t(()=>[o(xe,null,{default:t(()=>[o(ye,null,{default:t(()=>[o(x,{name:"edit_note",size:"md"}),o(we,null,{default:t(()=>e[61]||(e[61]=[r("Novo B\xF4nus")])),_:1}),o(k,{id:l.bonus.id,cor:"positive",class:"float-right"},null,8,["id"])]),_:1})]),_:1}),o(ke,null,{default:t(()=>[o(De,null,{default:t(()=>[o(I,{gutter:"md",items:"center",justify:"center"},{default:t(()=>[o(V,{col:"12"},{default:t(()=>[c("div",{onClick:e[23]||(e[23]=(...a)=>m.abrirModalCliente&&m.abrirModalCliente(...a)),class:"q-mb-md"},[o(u,{modelValue:l.bonus.nomeCliente,"onUpdate:modelValue":[e[21]||(e[21]=a=>l.bonus.nomeCliente=a),e[22]||(e[22]=a=>a===null?m.limparCliente():"")],debounce:500,dense:"",filled:"",somenteLeitura:!l.bonus.nomeCliente,clearable:!!l.bonus.nomeCliente,before:[{icon:"person",handler:m.abrirModalCliente}],after:[{icon:"search",handler:m.abrirModalCliente}],rotulo:"Cliente","input-class":"cursor-pointer"},null,8,["modelValue","somenteLeitura","clearable","before","after"])])]),_:1}),o(V,{col:"12 sm6"},{default:t(()=>[o(u,{modelValue:l.bonus.cpfCliente,"onUpdate:modelValue":e[24]||(e[24]=a=>l.bonus.cpfCliente=a),dense:"",filled:"",rotulo:"CPF",mask:"###.###.###-##",somenteLeitura:"",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),o(V,{col:"12 sm6"},{default:t(()=>[o(u,{modelValue:l.bonus.whatsappCliente,"onUpdate:modelValue":e[25]||(e[25]=a=>l.bonus.whatsappCliente=a),dense:"",filled:"",rotulo:"WhatsApp",mask:"(##) #####-####",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),o(V,{col:"12"},{default:t(()=>[o(B,{modelValue:l.bonus.dadosEmpresa,"onUpdate:modelValue":e[26]||(e[26]=a=>l.bonus.dadosEmpresa=a),filled:"",dense:"",chaves:["id","nome","apelido","numeroDocumentoNacional"],permiteNull:!1},null,8,["modelValue"])]),_:1}),o(V,{col:"6"},{default:t(()=>[o(u,{modelValue:l.bonus.diasMinimoUso,"onUpdate:modelValue":e[27]||(e[27]=a=>l.bonus.diasMinimoUso=a),filled:"",dense:"",rotulo:"Dias m\xEDnimos para uso",rules:[a=>m.validacao("diasMinimoUso",l.bonus)],tipo:"quantidade"},null,8,["modelValue","rules"])]),_:1}),o(V,{col:"6"},{default:t(()=>[o(u,{modelValue:l.bonus.dataInicioValidade,"onUpdate:modelValue":e[28]||(e[28]=a=>l.bonus.dataInicioValidade=a),rotulo:"Data de in\xEDcio da Validade",filled:"",dense:"",tipo:"data",rules:[a=>m.validacao("dataInicioValidade",l.bonus)]},null,8,["modelValue","rules"])]),_:1}),o(V,{col:"6"},{default:t(()=>[o(u,{modelValue:l.bonus.diasExpiracao,"onUpdate:modelValue":e[29]||(e[29]=a=>l.bonus.diasExpiracao=a),rotulo:"Expira em (dias)",tipo:"quantidade",filled:"",dense:"",rules:[a=>m.validacao("diasExpiracao",l.bonus)]},null,8,["modelValue","rules"])]),_:1}),o(V,{col:"6"},{default:t(()=>[o(u,{modelValue:l.bonus.dataVencimento,"onUpdate:modelValue":e[30]||(e[30]=a=>l.bonus.dataVencimento=a),tipo:"data",rotulo:"Data de Vencimento",filled:"",dense:"",rules:[a=>m.validacao("dataVencimento",l.bonus)]},null,8,["modelValue","rules"])]),_:1}),o(V,{col:"12 sm"},{default:t(()=>[o(u,{modelValue:l.bonus.valor,"onUpdate:modelValue":e[31]||(e[31]=a=>l.bonus.valor=a),prefix:"R$",rotulo:"Valor",tipo:"decimal",decimals:"2",filled:"",dense:"",rules:[a=>m.validacao("valor",l.bonus)]},null,8,["modelValue","rules"])]),_:1}),o(V,{col:"12 sm"},{default:t(()=>[o(u,{modelValue:l.bonus.valorMinimoVenda,"onUpdate:modelValue":e[32]||(e[32]=a=>l.bonus.valorMinimoVenda=a),prefix:"R$",tipo:"decimal",rotulo:"Valor m\xEDnimo da compra",decimals:"2",filled:"",dense:"",rules:[a=>m.validacao("valorMinimoVenda",l.bonus)]},null,8,["modelValue","rules"])]),_:1}),o(V,{col:"12"},{default:t(()=>[o(v,{caption:"",bordered:"",class:"q-pa-sm q-mb-md"},{default:t(()=>{var a,E,S,N,L,O,Q,T,P,j;return[o(v,{text:"body2",class:"q-mb-md"},{default:t(()=>e[62]||(e[62]=[r("Esse texto ser\xE1 enviado junto as informa\xE7\xF5es do b\xF4nus para o cliente.")])),_:1}),c("strong",null,f(((E=(a=l.bonus)==null?void 0:a.dadosEmpresa)==null?void 0:E.apelido)||((N=(S=l.bonus)==null?void 0:S.dadosEmpresa)==null?void 0:N.nome)||"Sua \xD3tica"),1),e[64]||(e[64]=r(" tem um presente para voc\xEA, ")),c("strong",null,f(((L=l.bonus)==null?void 0:L.nomeCliente)||"Ricardo"),1),e[65]||(e[65]=r(". ")),e[66]||(e[66]=c("br",null,null,-1)),e[67]||(e[67]=r(" Um super b\xF4nus no valor de ")),c("strong",null,"R$ "+f(s.$filters.numero((O=l.bonus)==null?void 0:O.valor,2)),1),e[68]||(e[68]=r(" para voc\xEA usar na sua pr\xF3xima compra acima de ")),e[69]||(e[69]=c("br",null,null,-1)),c("strong",null,"R$ "+f(s.$filters.numero((Q=l.bonus)==null?void 0:Q.valorMinimoVenda,2)),1),e[70]||(e[70]=r(", mas, fique atento ao prazo: v\xE1lido de ")),c("strong",null,f(s.$filters.data((T=l.bonus)==null?void 0:T.dataInicioValidade)),1),e[71]||(e[71]=r(" at\xE9 ")),c("strong",null,f(s.$filters.data((P=l.bonus)==null?void 0:P.dataVencimento)),1),e[72]||(e[72]=r("! ")),e[73]||(e[73]=c("br",null,null,-1)),e[74]||(e[74]=r(" Seu token \xE9 ")),c("strong",null,f((j=l.bonus.id||"")==null?void 0:j.slice(-8).replace(/(.{4})(.{4})/g,"$1-$2")),1),e[75]||(e[75]=r(". ")),e[76]||(e[76]=c("br",null,null,-1)),o(v,{text:"center",class:"q-my-sm"},{default:t(()=>[o(x,{name:"add",color:"primary",size:"xs"})]),_:1}),o(u,{modelValue:l.bonus.textoRegras,"onUpdate:modelValue":e[33]||(e[33]=J=>l.bonus.textoRegras=J),filled:"",dense:"",tipo:"textoArea",rotulo:"Regras para uso:"},null,8,["modelValue"]),o(v,{text:"regular"},{default:t(()=>[e[63]||(e[63]=r(" Texto din\xE2mico: ")),o(w,{onClick:e[34]||(e[34]=()=>{l.bonus.textoRegras+=" [NomeCliente]"}),dense:"",flat:"","no-caps":"",label:"[NomeCliente]",style:{"font-size":"0.75rem"}}),o(w,{onClick:e[35]||(e[35]=()=>{l.bonus.textoRegras+=" [NomeEmpresa]"}),dense:"",flat:"","no-caps":"",label:"[NomeEmpresa]",style:{"font-size":"0.75rem"}}),o(w,{onClick:e[36]||(e[36]=()=>{l.bonus.textoRegras+=" [DataVencimento]"}),dense:"",flat:"","no-caps":"",label:"[DataVencimento]",style:{"font-size":"0.75rem"}}),o(w,{onClick:e[37]||(e[37]=()=>{l.bonus.textoRegras+=" [CPF]"}),class:"captalize",dense:"",flat:"","no-caps":"",label:"[CPF]",style:{"font-size":"0.75rem"}}),o(w,{onClick:e[38]||(e[38]=()=>{l.bonus.textoRegras+=" [WhatsApp]"}),dense:"",flat:"","no-caps":"",label:"[WhatsApp]",style:{"font-size":"0.75rem"}}),o(w,{onClick:e[39]||(e[39]=()=>{l.bonus.textoRegras+=" [Valor]"}),dense:"",flat:"","no-caps":"",label:"[Valor]",style:{"font-size":"0.75rem"}}),o(w,{onClick:e[40]||(e[40]=()=>{l.bonus.textoRegras+=" [ValorMinimoCompra]"}),dense:"",flat:"","no-caps":"",label:"[ValorMinimoCompra]",style:{"font-size":"0.75rem"}})]),_:1})]}),_:1})]),_:1}),o(V,{col:"12"},{default:t(()=>[o(v,{bordered:"","roudned-borders":"",text:"regular caption",class:"q-pa-sm q-mb-md"},{default:t(()=>[o(u,{modelValue:l.bonus.observacao,"onUpdate:modelValue":e[41]||(e[41]=a=>l.bonus.observacao=a),filled:"",dense:"",tipo:"textoArea",rotulo:"Observa\xE7\xE3o:"},null,8,["modelValue"]),e[77]||(e[77]=c("strong",null,"*",-1)),e[78]||(e[78]=r(" Esta observa\xE7\xE3o s\xF3 estar\xE1 disponivel aqui nas configura\xE7\xF5es. "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(he,{class:"bg-light border-top q-px-md q-py-sm text-right"},{default:t(()=>[o(w,{onClick:e[42]||(e[42]=a=>m.fecharBonus()),flat:"",label:"Cancelar",color:"tertiary"}),o(w,{type:"submit",unelevated:"",dark:"",color:"primary",label:"Salvar",class:"q-ml-sm"})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["style"])]),_:1},8,["modelValue","maximized"])])}var Je=ue(Me,[["render",Pe]]);export{Je as default};
