import{_ as p,ay as c,aw as u,o as m,p as b,C as f,f as S,w as j,F as h,x as w,d as g,a$ as O,a_ as _,s as y}from"./index.0b6a0fa4.js";const v={data(){return{abaSelecionada:"",abas:[]}},methods:{async atualizar(){this.abas=[],this.abaSelecionada=null;let i=JSON.parse(localStorage.getItem("clienteSistema"))||{};if(!(i||{}).idSistema)return;const n=(await c.objeto.where({nomeObjeto:this.objetoPai}).toArray()).find(e=>e.id);if(!(n||{}).id)return;let o=await c.sistemaObjeto.where({idPai:n.id,idSistema:i.idSistema}).toArray();if(o=o.filter((e,a,s)=>a===s.findLastIndex(d=>d.idObjeto===e.idObjeto)),!o.length)return;const l=await c.objeto.where("id").anyOf(o.map(e=>e.idObjeto)).toArray();if(!l.length)return;o=o.sort((e,a)=>(e.ordem||0)>(a.ordem||0)?1:-1);const t=[];for(const e of o){const a=l.find(d=>d.id===e.idObjeto);if(!a)continue;const s=JSON.parse(a.rota||null)||{};!await u.permissao.objeto(a.nomeObjeto)||a.tipo==="componente"&&!a.menuPrincipal&&(a.menuDesenvolvimento&&!(u.usuario.logado.desenvolvedor&&u.usuario.logado.desenvolvedor())||t.push({icon:a.icone||"",label:a.descricao||"",to:{name:s.name||""}}))}if(!t.length)return;let r=t.find(e=>e.to.name===this.$route.name);r||(r=t[0]),n.descricao!=="Cockpit"&&this.irPara(r.to),this.abaSelecionada=r.to.name,this.abas=t},irPara(i){this.$router.push({...i,...this.$route.params.id?{params:{id:this.$route.params.id}}:{}}),this.abaSelecionada=i.name}},props:{objetoPai:{type:String,required:!0}},watch:{"$route.name"(){this.abaSelecionada=this.$route.name}},mounted(){this.atualizar()}},$={class:"bg-gradiente text-white"},x={class:"u-container"};function P(i,n,o,l,t,r){return m(),b(h,null,[f("div",$,[f("div",x,[S(_,{modelValue:t.abaSelecionada,"onUpdate:modelValue":n[0]||(n[0]=e=>t.abaSelecionada=e),dense:"",align:"justify","text-color":"white",color:"transparent","indicator-color":"cyan-12",class:"text-white q-mb-md"},{default:j(()=>[(m(!0),b(h,null,w(t.abas,(e,a)=>(m(),g(O,{key:a,onClick:s=>r.irPara(e.to),name:e.to.name,label:e.label,icon:e.icon,class:"Layout-aba"},null,8,["onClick","name","label","icon"]))),128))]),_:1},8,["modelValue"])])]),y(i.$slots,"default")],64)}var C=p(v,[["render",P]]);export{C as M};
