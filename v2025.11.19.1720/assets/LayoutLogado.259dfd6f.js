import{_ as y,aK as G,r as m,o as n,p as d,x as L,F as v,d as p,w as r,f as a,at as P,B as V,T as I,j as M,k as h,t as C,S as N,aw as f,P as g,l as F,U as b,e as k,G as B,J as S,C as $,I as q,b3 as O,M as E,h as U,v as j,K as J,Q as T,b0 as A,H as x,b4 as D}from"./index.0b6a0fa4.js";const H={name:"MenuGeradorItem",computed:{sincronismoStatus(){return G.status}},data(){return{}},methods:{repete_evento(e){this.$emit("menuClick",e)},menuClick(e){this.$lodash.get(e,"rota.name")==="Plataforma15"&&(e=JSON.parse(JSON.stringify(e.rota.params)),this.$emit("menuClick",e))}},props:{itens:{default:()=>[],type:Array}},emits:["menuClick"]};function R(e,t,i,u,o,l){const c=m("menu-gerador-item",!0);return n(!0),d(v,null,L(i.itens.filter(s=>s.mostrar),s=>(n(),d(v,{key:s.id},[e.$lodash.get(s,"filhos.length")?(n(),p(V,{key:0,onClick:P(w=>l.menuClick(s),["stop"]),icon:s.icone||"label",label:s.descricao,to:s.rota,duration:160,dense:"",class:"text-tertiary submenuGeradorItem"},{default:r(()=>[a(c,{onMenuClick:l.repete_evento,itens:s.filhos},null,8,["onMenuClick","itens"])]),_:2},1032,["onClick","icon","label","to"])):(n(),p(N,{key:1,onClick:P(w=>l.menuClick(s),["stop"]),to:s.rota,clickable:"",dense:"",class:"text-tertiary menuGeradorItem"},{default:r(()=>[a(I,{avatar:""},{default:r(()=>[a(M,{name:s.icone||"label",size:"sm"},null,8,["name"])]),_:2},1024),a(I,null,{default:r(()=>[h(C(s.descricao),1)]),_:2},1024)]),_:2},1032,["onClick","to"]))],64))),128)}var z=y(H,[["render",R]]);const K={components:{MenuGeradorItem:z},data(){return{carregando:!1,menuPrincipal:[],menuDesenvolvimento:[]}},methods:{menuClick(e){this.$emit("menuClick",e)},marcar(e){e.forEach(t=>{if((t.filhos||[]).length&&this.marcar(t.filhos),(t.descricao||"").toLowerCase().search(this.termoBusca)!==-1){t.mostrar=!0;return}t.mostrar=!!(t.filhos||[]).find(i=>i.mostrar)})},gerarIds(e){e.forEach(t=>{(t.filhos||[]).length&&this.gerarIds(t.filhos),this.$lodash.get(t,"rota.name")==="Plataforma15"&&this.$lodash.set(t,"rota.params.id",this.$utils.uuid())})}},props:{termoBusca:{type:String}},emits:["menuClick"],watch:{termoBusca(){this.marcar(this.menuPrincipal),this.marcar(this.menuDesenvolvimento)}},async created(){try{this.carregando=!0;let e=await f.permissao.menu();this.marcar(e),this.gerarIds(e),this.menuPrincipal=e.filter(u=>{if(!this.$q.platform.is.mobile||!/\/plataforma15\//.test((u.rota||{}).path))return!0});const t=!!f.usuario.logado.desenvolvedor&&f.usuario.logado.desenvolvedor();let i=t?await f.permissao.menu(!0):[];this.marcar(i),this.gerarIds(i),this.menuDesenvolvimento=t?[...i,{descricao:"Desenvolvedor",icone:"build",id:$utils.uuid(),mostrar:!0,rota:{name:"Desenvolvedor"}}]:[]}catch(e){this.$q.notifyError("Erro ao obter permiss\xF5es",e)}finally{this.carregando=!1}}};function W(e,t,i,u,o,l){const c=m("MenuGeradorItem");return o.menuPrincipal.length?(n(),d(v,{key:0},[a(g,{class:"geradorItem text-tertiary"},{default:r(()=>[a(c,{itens:o.menuPrincipal,onMenuClick:l.menuClick},null,8,["itens","onMenuClick"])]),_:1}),a(F,{class:"q-my-sm q-mx-md"}),o.menuDesenvolvimento.length?(n(),p(g,{key:0,class:"geradorItem text-tertiary"},{default:r(()=>[a(b,{header:""},{default:r(()=>t[0]||(t[0]=[h("Menu Desenvolvimento")])),_:1}),a(c,{itens:o.menuDesenvolvimento,onMenuClick:l.menuClick},null,8,["itens","onMenuClick"])]),_:1})):k("",!0)],64)):o.carregando?(n(),p(g,{key:1},{default:r(()=>[a(b,null,{default:r(()=>t[1]||(t[1]=[h(" Carregando... ")])),_:1})]),_:1})):(n(),p(g,{key:2},{default:r(()=>[a(b,null,{default:r(()=>t[2]||(t[2]=[h(" Ops! Parece que voc\xEA n\xE3o possui permiss\xF5es de acesso. ")])),_:1})]),_:1}))}var Y=y(K,[["render",W]]);const X={data(){return{carregando:!1}},methods:{async menuClick(e){$q.loading.show(),await $utils.dormir(250);const t=new Date;for(this.carregando||(this.carregando=!0,localStorage.setItem("plat15message",""),await new Promise(async(o,l)=>{for(;localStorage.getItem("plat15message","")===""&&new Date-t<1e4;)await $utils.dormir(500);o()})),localStorage.setItem("plat15message",""),this.$refs.quadro.contentWindow.postMessage({objeto:e.objeto},"*");localStorage.getItem("plat15message","")===""&&new Date-t<1e4;)await $utils.dormir(500);const u=(this.$refs.quadro.contentDocument||this.$refs.quadro.contentWindow.document).querySelector("#sticky-wrapper .breadLine");u.style.width==="0px"&&u.style.removeProperty("width"),$q.loading.hide()}}},Z={id:"Plataforma15"},ee={key:0},te={class:"Plataforma15-quadro",ref:"quadro",src:"/statics/plat15/Index.html",frameborder:"0",style:{position:"relative","min-height":"calc(100vh - 64px)!important",height:"calc(100vh - 64px)!important","max-height":"calc(100vh - 64px)!important"}};function ae(e,t,i,u,o,l){const c=m("barraTopo");return n(),d("div",Z,[e.$route.name==="Plataforma15"?(n(),p(B,{key:0,class:"bg-gradiente text-white"},{default:r(()=>[a(c)]),_:1})):k("",!0),a(q,{style:{"padding-top":"56px"}},{default:r(()=>[a(S,null,{default:r(()=>[o.carregando?(n(),d("div",ee,[$("iframe",te,null,512)])):k("",!0)]),_:1})]),_:1})])}var re=y(X,[["render",ae]]);const oe={components:{MenuGerador:Y,Plataforma15:re},computed:{termoBuscaInLowerCase(){return(this.termoBusca||"").toLowerCase()}},data(){return{sistemaPai:O(),dbUsuario:$db.usuario,rota:"",start:!1,menuPrincipal:f.app.menuVisivel,termoBusca:""}},methods:{async menuClick(e){this.$refs.Plataforma15.menuClick(e)},whatsappAbrir(){const e=encodeURI(`Ol\xE1 sou ${this.dbUsuario.logado.nome} (${localStorage.getItem("bancoDeDados")}), e preciso de suporte!`);window.open("https://api.whatsapp.com/send?phone=551621116161&text="+e,"_blank")}},mounted(){this.$route.name==="Plataforma15"&&!this.$route.redirectedFrom&&this.$refs.Plataforma15.menuClick(JSON.parse(JSON.stringify(this.$route.params)))}},se={class:"text-weight-medium float-left"},ne={key:0},le={class:"text-weight-bold float-right"};function ie(e,t,i,u,o,l){const c=m("MenuGerador"),s=m("g-label"),w=m("Plataforma15"),Q=m("router-view");return n(),d(v,null,[a(A,{modelValue:o.menuPrincipal,"onUpdate:modelValue":t[2]||(t[2]=_=>o.menuPrincipal=_),elevated:"",behavior:"mobile",side:"left"},{default:r(()=>[a(E,{view:"hHh LpR lFr"},{default:r(()=>[a(B,null,{default:r(()=>[a(U,{class:"bg-white q-py-sm q-px-md border-bottom"},{default:r(()=>[a(j,{modelValue:o.termoBusca,"onUpdate:modelValue":t[0]||(t[0]=_=>o.termoBusca=_),debounce:300,placeholder:"Filtrar",color:"none","clear-icon":"close",clearable:"",outlined:"",dense:""},{prepend:r(()=>[a(M,{name:"mdi-filter"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(q,null,{default:r(()=>[a(S,null,{default:r(()=>[a(c,{termoBusca:l.termoBuscaInLowerCase,onMenuClick:l.menuClick},null,8,["termoBusca","onMenuClick"])]),_:1})]),_:1}),a(J,{class:"bg-white border-top"},{default:r(()=>[a(s,{color:"text-tertiary",class:"q-py-xs q-px-sm"},{default:r(()=>[$("small",se,[h(" \xA9"+C(new Date().getFullYear())+" | B15",1),o.sistemaPai==="optisoul"?(n(),d("span",ne," Optidados")):k("",!0)]),$("small",le,C(e.$db.app.versao.value),1)]),_:1}),a(T,{onClick:t[1]||(t[1]=_=>l.whatsappAbrir()),icon:"contact_support",label:"Ajuda / Suporte",unelevated:"",dense:"",color:"primary",class:"fit",style:{"text-transform":"capitalize"}})]),_:1})]),_:1})]),_:1},8,["modelValue"]),x(a(w,{ref:"Plataforma15"},null,512),[[D,e.$route.name==="Plataforma15"]]),x(a(Q,null,null,512),[[D,e.$route.name!=="Plataforma15"]])],64)}var ce=y(oe,[["render",ie]]);export{ce as default};
