import{_ as _e,ax as oe,aX as Be,bQ as he,bm as ve,o as d,d as c,w as t,f as e,M as Fe,C as T,at as Ce,G as we,h as ke,i as xe,j as w,k as n,H as Y,Q as Z,N as ie,J as Ee,I as qe,S as F,T as u,U as v,t as f,e as g,P as te,cK as Pe,p as z,F as S,x as H,aZ as Ve,m as G,X as de,aN as se,l as ae,as as De,cL as ze,aP as Ie,K as Te,aU as Ne,D as Se,aw as j,cM as Re,b3 as Ae,r as X,bJ as He,bf as re,q as ne,b4 as ye,A as Qe}from"./index.0fffb5c9.js";import{e as Me}from"./emitirNFe.35117289.js";import{n as je}from"./nfePrincipal.c1d2353e.js";import{F as Le}from"./FaturaModal.0bd12412.js";import{D as Ue}from"./DocumentosFiscais.fd9a320c.js";import{M as Oe}from"./ModalHistoricoStatus.8c507cb2.js";const Ge={computed:{visivel:{get(){return this.modelValue},async set(i){this.$emit("update:modelValue",i)}},ativarBotaoEmissaoBoleto(){var a,_,m,o;const i=Number((_=(a=this.boletos)==null?void 0:a.financeiroBanco)==null?void 0:_.value);return Number.isInteger(i)&&i&&((o=(m=this.boletos)==null?void 0:m.condicoesPagamento)==null?void 0:o.find(p=>p.checked))}},data(){return{boletos:{codigoFinanceiroBanco:"",condicoesPagamento:[],bancos:[],emitidos:!1,emitir:!1,loading:!1,cancelarAtualizarBoletos:!1}}},emits:["update:modelValue"],methods:{async atualizar(){var i,a,_,m,o;try{if((i=this.fatura)!=null&&i.id){this.boletos={codigoFinanceiroBanco:"",condicoesPagamento:[],bancos:[],emitidos:!1,emitir:!1,loading:!1,cancelarAtualizarBoletos:!1};const p=[],B=await oe().formaPagamento.toArray(),V=await oe().empresa.where({idContato:(a=this.fatura)==null?void 0:a.idEmpresa}).toArray();if(await(await $db.hibrido.lista({table:"documentoCondicaoPagamento",where:{idDocumento:(_=this.fatura)==null?void 0:_.id}})).forEach(C=>{const I=B.find(y=>y.id===C.idFormaPagamento&&y.tipo===99&&y.tipoFinanceiro==="T\xEDtulo em aberto");I&&p.push({dataVencimento:C.dataVencimento,descricao:I.descricao,idFinanceiroTitulo:C.idFinanceiroTitulo,codigoFinanceiroBoleto:"",checked:!1,disable:!0,valor:C.valor})}),!p.length)return;const Q=[];await oe().financeiroBanco.each(C=>{if(!!C.ativo){if(C.id==="7D07229E-B35E-42AA-A312-78313BE61B2F"){Q.push(C);return}C.idEmpresa&&V.find(I=>I.id===C.idEmpresa)&&Q.push(C)}});const q=[...new Set(Q.map(C=>C.codigoBanco))],N=[];await oe()._banco.each(C=>{q.find(I=>I===C.codigoBanco)&&N.push(C)}),this.boletos.condicoesPagamento=Be.exports.orderBy(p,"dataVencimento","asc");const R=[];for(const C of Q){const I=N.find(x=>x.codigoBanco===C.codigoBanco)||{};if(!I)continue;const y=(I.descricao||"").trim(),l=(C.agencia||"").trim(),r=(C.conta||"").trim();if(!I.arquivoBoleto||!y||!l||!r)continue;let s=y+" - Ag. "+l+" C/C "+r;R.push({arquivoBoleto:I.arquivoBoleto,label:s,value:C.codigoFinanceiroBanco})}R.length&&(this.boletos.financeiroBanco=R[0],this.boletos.bancos=R);const L=(await $db.hibrido.lista({table:"documentoFiscalEletronico",where:{idDocumento:(m=this.fatura)==null?void 0:m.id}})).find(C=>C.situacao==="Emitido")||null;for(const C of(o=this.boletos)==null?void 0:o.condicoesPagamento)C.checked=!1,C.disable=!0,C.codigoFinanceiroBoleto="",C.codigoFinanceiroTitulo="",C.banco={};this.boletos.docFiscal=L,this.boletos.financeiroBanco=this.boletos.bancos[0],this.$nextTick().then(async()=>{await this.atualizarBoletos()})}}catch(p){console.error("ERRO: ",p)}},async atualizarBoletos(){var i;try{let a,_,m,o;o=(i=this.boletos)==null?void 0:i.condicoesPagamento,m=o.reduce((B,V)=>B+"'"+V.idFinanceiroTitulo+"',",""),m=m.slice(0,m.length-1),a=`
            select
              fTitulo.id,
              fTitulo.codigoFinanceiroTitulo,
              fBoleto.codigoFinanceiroBoleto,
              fBoleto.dataEmissao,
              b.descricao,
              fBanco.agencia,
              fBanco.conta,
              b.arquivoBoleto
            from financeiroTitulo fTitulo
              left join financeiroBoleto fBoleto on(fBoleto.codigoFinanceiroBoleto = fTitulo.codigoFinanceiroBoleto)
              left join financeiroBanco fBanco on(fBanco.CodigoFinanceiroBanco = fBoleto.codigoFinanceiroBanco)
              left join _banco b on(b.codigoBanco = fBanco.codigoBanco)
            where fTitulo.id in (${m})
          `,this.boletos.cancelarAtualizarBoletos=!1;let p=0;do{try{_=await he(a),p=0}catch(B){_=[],++p%3===0&&this.$q.notifyError(B.message)}for(const B of _){const V=o.find(k=>k.idFinanceiroTitulo===B.id);V&&(B.codigoFinanceiroBoleto&&(V.codigoFinanceiroBoleto=B.codigoFinanceiroBoleto,V.banco={descricao:B.descricao,dataEmissao:B.dataEmissao,agencia:B.agencia,conta:B.conta,arquivoBoleto:B.arquivoBoleto}),B.codigoFinanceiroTitulo&&(V.codigoFinanceiroTitulo=B.codigoFinanceiroTitulo,V.disable=!1))}if(_.length===o.length||this.boletos.cancelarAtualizarBoletos)break;await ve(5e3)}while(1)}catch{$q.notify({message:"N\xE3o foi poss\xEDvel atualizar os boletos.",type:"tertiary"})}},async emitirImprimirBoleto(){var B,V,k,Q,q,N,R,L,C,I;this.boletos.loading=!0;let i,a,_,m={},o=[];_=(V=(B=this.boletos)==null?void 0:B.condicoesPagamento)==null?void 0:V.filter(y=>y.checked);for(const y of _){if(y.codigoFinanceiroBoleto&&(y.banco||{}).arquivoBoleto){if(!m[y.banco.arquivoBoleto]){m[y.banco.arquivoBoleto]=[y.codigoFinanceiroBoleto];continue}m[y.banco.arquivoBoleto].push(y.codigoFinanceiroBoleto);continue}o.push(y.codigoFinanceiroTitulo)}if((o==null?void 0:o.length)&&((Q=(k=this.boletos)==null?void 0:k.financeiroBanco)==null?void 0:Q.value)){let y,l,r,s=0,x=0,h,E="";if(this.cancelarEmitirBoletos=!1,(q=this.boletos)!=null&&q.docFiscal&&(E=`${this.boletos.docFiscal.nNF} / S\xE9rie ${this.boletos.docFiscal.serie} | `),h=(L=((R=(N=this.boletos)==null?void 0:N.bancos)==null?void 0:R.find(P=>{var D,A;return P.value===((A=(D=this.boletos)==null?void 0:D.financeiroBanco)==null?void 0:A.value)}))||{})==null?void 0:L.arquivoBoleto,!h){this.$q.notifyError("Arquivo boleto n\xE3o encontrado");return}i=`sp_financeiro_boletoEmitir ${(I=(C=this.boletos)==null?void 0:C.financeiroBanco)==null?void 0:I.value}, '${o==null?void 0:o.join(",")}', '${E}'`;do{if(this.cancelarEmitirBoletos)break;try{a=await he(i),s=0}catch(P){a=[],++s%3===0&&this.$q.notifyError(P.message)}if(y=(a||[])[0],l=((y||{}).Msg||"").trim(),r=((y||{}).Retorno||"").trim(),l==="Boleto Gerado com sucesso!"&&r){const P=r.substring(0,r.length-1).split(",");if(!m[h]){m[h]=P;break}for(const D of P)m[h].push(D);break}else++x%3===0&&this.$q.notifyError(l);await ve(5e3)}while(1)}let p=JSON.parse(localStorage.getItem("clienteSistema"))||{};for(const y in m){let l;l="https://rel.storage.b15.com.br/Relatorios/"+y+".html?",l+="CodigoFinanceiroBoleto="+m[y].join(","),l+="&Banco="+p.bancoDeDados,l+="&URLServidor="+p.urlServidor,this.$imprimir("tela-de-boleto-automatico",btoa(l))}await this.atualizarBoletos(),this.boletos.loading=!1},checkboxTodos(i){var a,_,m,o,p,B,V,k,Q,q,N,R,L,C,I,y,l,r,s,x;if(i==="emitidos"&&((m=(_=(a=this.boletos)==null?void 0:a.condicoesPagamento)==null?void 0:_.filter(h=>!h.disable&&h.codigoFinanceiroBoleto))==null?void 0:m.length))for(const h of(p=(o=this.boletos)==null?void 0:o.condicoesPagamento)==null?void 0:p.filter(E=>!E.disable&&E.codigoFinanceiroBoleto))h.checked=!!this.boletos.emitidos;if(i==="emitir"&&((k=(V=(B=this.boletos)==null?void 0:B.condicoesPagamento)==null?void 0:V.filter(h=>!h.disable&&!h.codigoFinanceiroBoleto))==null?void 0:k.length))for(const h of(q=(Q=this.boletos)==null?void 0:Q.condicoesPagamento)==null?void 0:q.filter(E=>!E.disable&&!E.codigoFinanceiroBoleto))h.checked=!!this.boletos.emitir;if(!i){if((L=(R=(N=this.boletos)==null?void 0:N.condicoesPagamento)==null?void 0:R.filter(h=>!h.disable&&h.codigoFinanceiroBoleto))!=null&&L.length){const h=(I=(C=this.boletos)==null?void 0:C.condicoesPagamento)==null?void 0:I.filter(E=>!E.disable&&E.codigoFinanceiroBoleto);this.boletos.emitidos=h.reduce((E,P)=>E&&P.checked,!0)}if((r=(l=(y=this.boletos)==null?void 0:y.condicoesPagamento)==null?void 0:l.filter(h=>!h.disable&&!h.codigoFinanceiroBoleto))!=null&&r.length){const h=(x=(s=this.boletos)==null?void 0:s.condicoesPagamento)==null?void 0:x.filter(E=>!E.disable&&!E.codigoFinanceiroBoleto);this.boletos.emitir=h.reduce((E,P)=>E&&P.checked,!0)}}},async fetchAndRenderHTMLInIframe(i){return new Promise((a,_)=>{const m=document.createElement("iframe");m.style.display="none",document.body.appendChild(m),m.onload=async()=>{try{const o=m.contentWindow.document.body.innerHTML;document.body.removeChild(m),a(o)}catch(o){_(o)}},m.onerror=()=>{_(new Error("Erro ao carregar o iframe"))},m.src=i})},async enviarBoletoEmailAutomatico(i,a,_){try{const{showLoading:m,successMsg:o,errorMsg:p}={},V={host:"smtp.gmail.com",port:587,ssl:!0,auth:{user:"auto@geekssolucoes.com.br",pass:"drab azmd uvtf izhd"},from:a,to:_,subject:"Boleto Automatico",text:"Boleto envio automatico",attachments:[{name:"boleto.pdf",content:i,method:"url2pdf"}]},k=await axios({baseURL:"https://api.b15.com.br",method:"post",url:"/email/v2",data:V});this.$q.notifyPositive((k==null?void 0:k.status)===200&&o?o:k.data.message)}catch(m){this.$q.notifyError("Erro ao enviar o boleto",m)}}},props:{modelValue:{type:Boolean,required:!0},fatura:{type:Object,required:!0,default:()=>({})}},watch:{async visivel(i){i&&await this.atualizar()}}},Je={class:"text-weight-medium q-px-xs"},Ke={class:"text-weight-medium q-px-xs"},We={class:"text-weight-bold q-pr-xs"},Xe={class:"text-weight-bold q-pr-xs"},Ze={class:"text-weight-bold q-pr-xs"},Ye={class:"text-weight-medium float-right"};function $e(i,a,_,m,o,p){return d(),c(Se,{modelValue:p.visivel,"onUpdate:modelValue":a[8]||(a[8]=B=>p.visivel=B)},{default:t(()=>[e(Fe,{container:"",view:"hHh LpR fFf",class:"bg-white rounded-borders",style:{height:"100%","max-height":"500px"}},{default:t(()=>[T("form",{onSubmit:a[7]||(a[7]=Ce(B=>p.emitirImprimirBoleto(),["prevent"])),class:"q-pa-sm"},[e(we,null,{default:t(()=>[e(ke,null,{default:t(()=>[e(xe,null,{default:t(()=>[e(w,{name:"receipt_long",size:"sm",class:"q-mr-sm"}),a[9]||(a[9]=n(" Emiss\xE3o de Boleto "))]),_:1}),Y(e(Z,{icon:"close",flat:"",round:"",dense:""},null,512),[[ie]])]),_:1})]),_:1}),e(Ee,null,{default:t(()=>[e(qe,null,{default:t(()=>{var B,V,k,Q,q,N,R,L,C,I,y;return[(B=o.boletos)!=null&&B.docFiscal?(d(),c(F,{key:0,class:"q-py-none q-px-sm"},{default:t(()=>[e(u,{class:"no-margin"},{default:t(()=>[e(v,{header:""},{default:t(()=>{var l,r,s,x;return[e(w,{name:"insert_drive_file",size:"xs",class:"q-mr-xs"}),a[10]||(a[10]=n(" Nota fiscal: ")),T("span",Je,f((r=(l=o.boletos)==null?void 0:l.docFiscal)==null?void 0:r.nNF),1),a[11]||(a[11]=n(" | S\xE9rie: ")),T("span",Ke,f((x=(s=o.boletos)==null?void 0:s.docFiscal)==null?void 0:x.serie),1)]}),_:1})]),_:1})]),_:1})):g("",!0),(Q=(k=(V=o.boletos)==null?void 0:V.condicoesPagamento)==null?void 0:k.filter(l=>l.disable))!=null&&Q.length?(d(),c(te,{key:1,dense:"",highlight:"",bordered:"","rounded-borders":"",class:"q-pa-none q-mx-sm q-my-lg"},{default:t(()=>{var l,r;return[e(v,{header:"",class:"text-weight-medium text-center"},{default:t(()=>[e(Pe,{size:"xs",class:"q-mr-sm"}),a[12]||(a[12]=n(" Recuperando informa\xE7\xF5es do servidor... "))]),_:1}),(d(!0),z(S,null,H((r=(l=o.boletos)==null?void 0:l.condicoesPagamento)==null?void 0:r.filter(s=>s.disable),(s,x)=>Y((d(),c(F,{key:x,tag:"label"},{default:t(()=>[e(u,{side:""},{default:t(()=>[s!=null&&s.disable?(d(),c(Ve,{key:0})):g("",!0)]),_:2},1024),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[n(f(s==null?void 0:s.descricao),1)]),_:2},1024)]),_:2},1024),e(u,null,{default:t(()=>[e(v,{class:"text-weight-medium text-center"},{default:t(()=>[T("span",null,[n(f(i.$filters.data(s==null?void 0:s.dataVencimento))+" ",1),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>a[13]||(a[13]=[n(" Data de Vencimento ")])),_:1})])]),_:2},1024)]),_:2},1024),e(u,null,{default:t(()=>[e(v,{class:"text-weight-medium text-right"},{default:t(()=>[n(f(i.$filters.numero(s==null?void 0:s.valor,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[de]])),128))]}),_:1})):g("",!0),(R=(N=(q=o.boletos)==null?void 0:q.condicoesPagamento)==null?void 0:N.filter(l=>!l.disable&&l.codigoFinanceiroBoleto))!=null&&R.length?(d(),c(te,{key:2,dense:"",highlight:"",bordered:"","rounded-borders":"",class:"q-pa-none q-mx-sm q-my-lg"},{default:t(()=>{var l,r;return[e(v,{header:"",class:"text-weight-medium"},{default:t(()=>[T("span",null,[e(se,{modelValue:o.boletos.emitidos,"onUpdate:modelValue":[a[0]||(a[0]=s=>o.boletos.emitidos=s),a[1]||(a[1]=s=>p.checkboxTodos("emitidos"))]},null,8,["modelValue"]),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>[n(f(o.boletos.emitidos?"Desmarcar Todos":"Marcar Todos"),1)]),_:1})]),a[14]||(a[14]=n(" Boletos Emitidos "))]),_:1}),(d(!0),z(S,null,H((r=(l=o.boletos)==null?void 0:l.condicoesPagamento)==null?void 0:r.filter(s=>!s.disable&&s.codigoFinanceiroBoleto),(s,x)=>Y((d(),c(F,{key:x,tag:"label"},{default:t(()=>[e(u,{side:""},{default:t(()=>[e(se,{modelValue:s.checked,"onUpdate:modelValue":[h=>s.checked=h,a[2]||(a[2]=h=>p.checkboxTodos())]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[e(F,{class:"q-pa-none",style:{"min-height":"22px"}},{default:t(()=>[e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[n(f(s==null?void 0:s.descricao),1)]),_:2},1024)]),_:2},1024),e(u,null,{default:t(()=>[e(v,{class:"text-weight-medium text-center"},{default:t(()=>[T("span",null,[n(f(i.$filters.data(s==null?void 0:s.dataVencimento))+" ",1),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>a[15]||(a[15]=[n(" Data de Vencimento ")])),_:1})])]),_:2},1024)]),_:2},1024),e(u,null,{default:t(()=>[e(v,{class:"text-weight-medium text-right"},{default:t(()=>[n(f(i.$filters.numero(s==null?void 0:s.valor,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(ae,{class:"q-mx-sm"}),e(v,{caption:""},{default:t(()=>{var h,E,P,D;return[T("span",We,f((h=s==null?void 0:s.banco)==null?void 0:h.descricao)+",",1),a[16]||(a[16]=n(" Ag.: ")),T("span",Xe,f((E=s==null?void 0:s.banco)==null?void 0:E.agencia)+",",1),a[17]||(a[17]=n(" C/C: ")),T("span",Ze,f((P=s==null?void 0:s.banco)==null?void 0:P.conta),1),T("span",Ye,[n(f(i.$filters.data((D=s==null?void 0:s.banco)==null?void 0:D.dataEmissao))+" ",1),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>{var A;return[n(" Emitido \xE1s "+f(i.$filters.hora((A=s==null?void 0:s.banco)==null?void 0:A.dataEmissao)),1)]}),_:2},1024)])]}),_:2},1024)]),_:2},1024)]),_:2},1024)),[[de]])),128))]}),_:1})):g("",!0),(I=(C=(L=o.boletos)==null?void 0:L.condicoesPagamento)==null?void 0:C.filter(l=>!l.disable&&!l.codigoFinanceiroBoleto))!=null&&I.length?(d(),c(te,{key:3,dense:"",highlight:"",bordered:"","rounded-borders":"",class:"q-pa-none q-mx-sm q-my-lg"},{default:t(()=>{var l,r;return[e(v,{header:"",class:"text-weight-medium"},{default:t(()=>[T("span",null,[e(se,{modelValue:o.boletos.emitir,"onUpdate:modelValue":[a[3]||(a[3]=s=>o.boletos.emitir=s),a[4]||(a[4]=s=>p.checkboxTodos("emitir"))]},null,8,["modelValue"]),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>[n(f(o.boletos.emitir?"Desmarcar Todos":"Marcar Todos"),1)]),_:1})]),a[18]||(a[18]=n(" Boletos a Emitir "))]),_:1}),e(F,{class:"q-pa-none"},{default:t(()=>[e(u,null,{default:t(()=>[e(De,{modelValue:o.boletos.financeiroBanco,"onUpdate:modelValue":a[5]||(a[5]=s=>o.boletos.financeiroBanco=s),options:o.boletos.bancos,dense:"",filled:"",label:"Op\xE7\xF5es de Bancos",class:"q-field--with-bottom"},null,8,["modelValue","options"])]),_:1})]),_:1}),(d(!0),z(S,null,H((r=(l=o.boletos)==null?void 0:l.condicoesPagamento)==null?void 0:r.filter(s=>!s.disable&&!s.codigoFinanceiroBoleto),(s,x)=>Y((d(),c(F,{key:x,tag:"label"},{default:t(()=>[e(u,{side:""},{default:t(()=>[e(se,{modelValue:s.checked,"onUpdate:modelValue":[h=>s.checked=h,a[6]||(a[6]=h=>p.checkboxTodos())]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[n(f(s==null?void 0:s.descricao),1)]),_:2},1024)]),_:2},1024),e(u,null,{default:t(()=>[e(v,{class:"text-weight-medium text-center"},{default:t(()=>[T("span",null,[n(f(i.$filters.data(s==null?void 0:s.dataVencimento))+" ",1),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>a[19]||(a[19]=[n(" Data de Vencimento ")])),_:1})])]),_:2},1024)]),_:2},1024),e(u,null,{default:t(()=>[e(v,{class:"text-weight-medium text-right"},{default:t(()=>[n(f(i.$filters.numero(s==null?void 0:s.valor,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[de]])),128))]}),_:1})):g("",!0),e(ze,{showing:(y=o.boletos)==null?void 0:y.loading},{default:t(()=>[e(Ie,{size:"50px",color:"primary"})]),_:1},8,["showing"])]}),_:1})]),_:1}),e(Te,{class:"bg-light"},{default:t(()=>[e(ke,null,{default:t(()=>[e(Ne),Y(e(Z,{label:"Cancelar",color:"tertiary",flat:"",class:"q-mr-sm"},null,512),[[ie]]),e(Z,{disable:!p.ativarBotaoEmissaoBoleto,type:"submit",label:"Imprimir",color:"primary",unelevated:""},null,8,["disable"])]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["modelValue"])}var et=_e(Ge,[["render",$e]]);const tt={components:{FaturaModal:Le,nfePrincipal:je,DocumentosFiscais:Ue,ModalHistoricoStatus:Oe,EmitirBoletos:et},computed:{config(){return j.configuracoes.valores},mostrarOpcaoRemoverFatura(){return this.dados.fatura.status==="Aberta"&&!this.dados.vendas.length&&!this.dados.documentosEnvelope.length&&!this.dados.carnes.length&&!this.dados.condicaoPagamento.length}},data(){return{dbUsuario:j.usuario,width:0,dados:{fatura:{}},contatos:{},detalhesVisivel:!1,sistemaPai:"",configImpressaoCarne:[],configImpressaoConvenio:[],configImpressaoFatura:[],configImpressaoEnvelope:[],boletos:{visivel:!1,fatura:{},btnEmitirBoleto:!1},podeEditar:!1,mostrarBotaoEnviarAvaliacao:!1,mostrarBotaoEnviarPedidosProtheus:!1,mostrarBotaoEmitirCupom:!1}},emits:["executar","carregou","verificarListaLayout"],mixins:[Re,Me],props:{id:{required:!0,type:String},layout:{type:String,default:"card"}},methods:{async enviarPedidosProtheus(i){await $db.fatura.enviarPedidosProtheus(i)},async removerFatura(){try{await new Promise((i,a)=>{this.$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 remover esta fatura.",noRefocus:!0,preventClose:!0,title:"Tem certeza?",cancel:{label:"CANCELAR",push:!0,color:"tertiary",flat:!0},ok:{label:"CONTINUAR",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{i()}).onCancel(()=>{a()})})}catch{return}this.dados.fatura.id?(await j.fatura.remover(this.dados.fatura.id),this.$emit("executar","atualizar")):this.$q.notify("N\xE3o foi poss\xEDvel realizar a opera\xE7\xE3o")},abrirEmitirBoletos(i){this.boletos.visivel=!0,this.boletos.fatura=i},alternarDetalhes(i){this.detalhesVisivel=!this.detalhesVisivel,this.layout==="lista"&&this.$emit("verificarListaLayout",{id:i,acao:"detalhes",estado:this.detalhesVisivel})},async atualizar(){const i={},a=await j.fatura.leCompleto(this.id);if(a.vendas.sort((m,o)=>new Date(m.dataHoraFinalizado)<new Date(o.dataHoraFinalizado)?-1:1),a.documentosEnvelope.sort((m,o)=>new Date(m.dataHoraFinalizado)<new Date(o.dataHoraFinalizado)?-1:1),a.carnes.sort((m,o)=>new Date(m.dataVencimento)<new Date(o.dataVencimento)?-1:1),a.vendas)for(const m of a.vendas)i[m.idContatoVendedor]||(i[m.idContatoVendedor]=await j.contato.le({id:m.idContatoVendedor})),i[m.idContatoDigitador]||(i[m.idContatoDigitador]=await j.contato.le({id:m.idContatoDigitador}));if(a.documentosEnvelope)for(const m of a.documentosEnvelope)i[m.idContatoVendedor]||(i[m.idContatoVendedor]=await j.contato.le({id:m.idContatoVendedor})),i[m.idContatoDigitador]||(i[m.idContatoDigitador]=await j.contato.le({id:m.idContatoDigitador}));if(a.fatura.idContato){const m=a.fatura.idContato;i[m]||(i[m]=await j.contato.le({id:m}))}if(a.fatura.idEmpresa){const m=a.fatura.idEmpresa;i[m]||(i[m]=await j.contato.le({id:m}))}if(a.fatura){let m=[],o=[];for(const p of a.vendas)m.push(p.idContatoVendedor),o.push(p.idContatoDigitador);for(const p of a.documentosEnvelope)m.push(p.idContatoVendedor),o.push(p.idContatoDigitador);a.fatura.vendedores=[...new Set(m)],a.fatura.digitadores=[...new Set(o)]}this.contatos=i,this.dados=a,this.condicaoPagamento=a.condicaoPagamento,await this.resumeCondicaoPagamento();const _=(await j.contato.ler({filtros:{ativo:!0,empresas:!0}})).data;this.podeEditar=!1,_.find(m=>m.id===a.fatura.idEmpresa)&&(this.podeEditar=!0),await this.configuraVisibilidadeBotoes(),await this.configuraVisibilidadeBtnBoletos(),await this.configuraImpressaoCarne(a.fatura.idEmpresa),await this.configuraImpressaoConvenio(a.fatura.idEmpresa),await this.configuraImpressaoEnvelope(a.fatura.idEmpresa),await this.configuraImpressaoFatura(a.fatura.idEmpresa),this.$nextTick(()=>{a.fatura.id===localStorage.getItem("idFatura")&&(this.podeEditar&&this.$refs.faturaModal.mostrar({id:this.dados.fatura.id}),localStorage.removeItem("idFatura"))})},editar(){this.$refs.faturaModal.mostrar({id:this.dados.fatura.id})},async executar(i){switch(i){case"atualizar":case"finalizar":case"retornarOrcamento":case"remover":this.$emit("executar","atualizar");return}await this.atualizar()},async sendReview(i){try{this.$q.loading.show();const a=[],_=this.contatos[i.idContato],m=await $api.bten.send(_,i);for(let o=0;o<m.length;o++){const p=m[o];p.status?a.push(p.telefone):this.$q.notifyError(`Falha ao enviar NPS para ${p.telefone}!`)}this.$q.loading.hide(),a.length&&this.$q.notifyPositive(`NPS enviado para ${a.join(",")}!`)}catch(a){if(a.name==="GeeksException"){this.$q.notifyAlert(a.message);return}this.$q.notifyError("N\xE3o foi possivel enviar NPS para o contato.",a)}finally{this.$q.loading.hide()}},fechouNFe(i){i&&$utils.emitter.emit("atualizarDocumentosFiscais")},async configuraImpressaoConvenio(i){const a=await j.configuracoes.porNome("impressao.convenio",i);this.configImpressaoConvenio=[...a.length?a.map(_=>({texto:"Imprimir Conv\xEAnio",..._})):[{valor:"convenio",texto:"Imprimir Conv\xEAnio"}]]},async configuraImpressaoCarne(i){const a=await j.configuracoes.porNome("impressao.carne",i);this.configImpressaoCarne=[...a.length?a.map(_=>({texto:"Imprimir Carn\xEA",..._})):[{valor:"carne-crediario",texto:"Reimprimir carn\xEA e notas promiss\xF3rias da fatura"}]]},async configuraImpressaoEnvelope(i){const a=await j.configuracoes.porNome("impressao.envelope",i);this.configImpressaoEnvelope=[...a.length?a.map(_=>({texto:"Imprimir Envelope",..._})):[{valor:"envelope",texto:"Imprimir Envelope"},{valor:"envelopeMini",texto:"Imprimir Envelope Mini"}]]},async configuraImpressaoFatura(i){const a=await j.configuracoes.porNome("impressao.fatura",i),_=[{valor:"invoice",texto:"Fatura (Invoice)"},{valor:"fatura-recibo",texto:"Recibo"}];this.sistemaPai==="optisoul"&&_.push({valor:"termoGarantia",texto:"Termo de Garantia"}),this.configImpressaoFatura=[...a.length?a.map(m=>({texto:"Imprimir Fatura",...m})):_]},async configuraVisibilidadeBotoes(){var m,o,p,B,V;let i,a,_;i=await $db.configuracoes.leValorComFiltroEmpresa("integrador.idDispositivo",this.dados.fatura.idEmpresa),this.mostrarBotaoEmitirCupom=!!i,i=await $db.configuracoes.porNome("integracao.bten.business"),a=(o=(m=i[0])==null?void 0:m.valor)!=null?o:!1,i=await $db.configuracoes.porNome("integracao.bten.authorization"),_=(B=(p=i[0])==null?void 0:p.valor)!=null?B:!1,this.mostrarBotaoEnviarAvaliacao=a&&_,i=await $db.configuracoes.porNome("protheus.credentials"),this.mostrarBotaoEnviarPedidosProtheus=!!((V=i[0])!=null&&V.valor)&&!!this.dados.fatura.dataHoraFinalizado},async configuraVisibilidadeBtnBoletos(){var i,a,_,m,o,p,B,V;try{if((a=(i=this.dados)==null?void 0:i.fatura)!=null&&a.id){const k=[],Q=await oe().formaPagamento.toArray(),q=await oe().empresa.where({idContato:(m=(_=this.dados)==null?void 0:_.fatura)==null?void 0:m.idEmpresa}).toArray();if(await(await $db.hibrido.lista({table:"documentoCondicaoPagamento",where:{idDocumento:(p=(o=this.dados)==null?void 0:o.fatura)==null?void 0:p.id}})).forEach(y=>{const l=Q.find(r=>r.id===y.idFormaPagamento&&r.tipo===99&&r.tipoFinanceiro==="T\xEDtulo em aberto");l&&k.push({descricao:l.descricao})}),!k.length)return;const R=[];await oe().financeiroBanco.each(y=>{if(!!y.ativo){if(y.id==="7D07229E-B35E-42AA-A312-78313BE61B2F"){R.push(y);return}y.idEmpresa&&q.find(l=>l.id===y.idEmpresa)&&R.push(y)}});const L=[...new Set(R.map(y=>y.codigoBanco))],C=[];await oe()._banco.each(y=>{L.find(l=>l===b.codigoBanco)&&C.push(y)});const I=[];for(const y of R){C.find(r=>r.codigoBanco===y.codigoBanco);I.push({codigoBanco:y.codigoBanco})}this.boletos.btnEmitirBoleto=!!((B=k||[])!=null&&B.length)&&!!((V=I||[])!=null&&V.length)}}catch(k){console.error("ERRO: ",k)}},onResize(){this.width=window.innerWidth}},async mounted(){this.sistemaPai=Ae(),await this.atualizar(),this.$emit("carregou")}},ot={id:"FaturaCard"},at={class:"mw80 text-center"},it={key:0},lt={key:1},st={style:{"margin-left":"14px"}},rt={style:{"margin-left":"14px"}},nt={class:"float-right text-weight-medium text-right q-ml-sm",style:{"min-width":"70px"}};function dt(i,a,_,m,o,p){const B=X("badge"),V=X("BadgeCopiarUid"),k=X("g-col"),Q=X("avatar"),q=X("g-label"),N=X("g-row"),R=X("DocumentosFiscais"),L=X("fatura-modal"),C=X("modal-historico-status"),I=X("nfePrincipal"),y=X("EmitirBoletos");return d(),z("div",ot,[e(He,{onResize:p.onResize},null,8,["onResize"]),_.layout==="card"?(d(),z(S,{key:0},[o.dados.fatura.id?(d(),c(Qe,{key:0,class:"extratoItem bg-white no-shadow"},{default:t(()=>[e(N,{gutter:"sm",items:"center",justify:"between"},{default:t(()=>[e(k,{col:"12",text:"right",class:"hideondesktop"},{default:t(()=>{var l,r,s,x,h,E;return[e(B,{rotulo:o.dados.fatura.status,escuro:"",cor:"tertiary",class:"q-mr-xs"},null,8,["rotulo"]),e(V,{cor:((r=(l=o.dados)==null?void 0:l.fatura)==null?void 0:r.status)==="Finalizada"?"positive":"tertiary",numero:(x=(s=o.dados)==null?void 0:s.fatura)==null?void 0:x.numero,id:(E=(h=o.dados)==null?void 0:h.fatura)==null?void 0:E.id,icone:"shopping_cart",escuro:""},null,8,["cor","numero","id"])]}),_:1}),e(k,{col:"12 sm5"},{default:t(()=>[e(N,{items:"center"},{default:t(()=>[e(k,{col:"shrink",self:o.width<=992?"top":"center"},{default:t(()=>{var l;return[e(Q,{imagem:(l=o.contatos[o.dados.fatura.idContato])==null?void 0:l.imagem,rotulo:o.dados.fatura.descricaoContato,tamanho:"40"},null,8,["imagem","rotulo"])]}),_:1},8,["self"]),e(k,null,{default:t(()=>[e(q,{text:"body1 medium"},{default:t(()=>{var l,r,s;return[n(f((l=o.contatos[o.dados.fatura.idContato])==null?void 0:l.apelido)+" ",1),((r=o.contatos[o.dados.fatura.idContato])==null?void 0:r.nome)!==((s=o.contatos[o.dados.fatura.idContato])==null?void 0:s.apelido)?(d(),c(q,{key:0,caption:""},{default:t(()=>{var x;return[n(f((x=o.contatos[o.dados.fatura.idContato])==null?void 0:x.nome),1)]}),_:1})):g("",!0)]}),_:1})]),_:1})]),_:1})]),_:1}),e(k,{col:"sm3",class:"hideonmobile"},{default:t(()=>{var l,r,s,x;return[e(V,{numero:(r=(l=o.dados)==null?void 0:l.fatura)==null?void 0:r.numero,id:(x=(s=o.dados)==null?void 0:s.fatura)==null?void 0:x.id,icone:"request_quote",cor:"positive",escuro:"",class:"q-mr-xs"},null,8,["numero","id"]),e(B,{rotulo:o.dados.fatura.status,escuro:"",cor:"tertiary"},null,8,["rotulo"])]}),_:1}),e(k,{col:"5 sm-shrink md2"},{default:t(()=>[o.dados.fatura.dataHoraEmissao?(d(),c(q,{key:0,icon:"mdi-calendar-today",tip:"Emiss\xE3o"},{default:t(()=>[n(f(i.$filters.data(o.dados.fatura.dataHoraEmissao)),1)]),_:1})):g("",!0),o.dados.fatura.dataHoraFinalizado?(d(),c(q,{key:1,icon:"mdi-calendar-check",tip:"Finalizado"},{default:t(()=>[n(f(i.$filters.data(o.dados.fatura.dataHoraFinalizado)),1)]),_:1})):g("",!0)]),_:1}),e(k,{col:"7 sm md2"},{default:t(()=>[e(q,{text:"h5 right bold",color:"text-positive"},{default:t(()=>[n(f(i.$filters.numero(o.dados.fatura.totalDocumento,2)),1)]),_:1}),e(q,{text:"body right medium"},{default:t(()=>[n(f(i.$filters.numero(o.dados.fatura.subTotal,2)),1)]),_:1})]),_:1})]),_:1}),e(ae,{class:"q-mx-sm q-mb-xs"}),e(N,{gutter:"sm",items:"center"},{default:t(()=>[e(k,{col:"12 md"},{default:t(()=>[o.dados.vendas.length?(d(!0),z(S,{key:0},H(o.dados.vendas,l=>(d(),c(N,{key:l.id,gutter:"none",items:"center",justify:"end"},{default:t(()=>[e(k,{col:"12 sm"},{default:t(()=>[e(q,null,{default:t(()=>{var r;return[e(w,{name:"shopping_cart"}),n(" "+f(l.tipo)+" ",1),e(V,{numero:l.numero,id:l.id,cor:"positive",escuro:"",class:"q-mr-xs"},null,8,["numero","id"]),e(B,{rotulo:l.status,escuro:"",cor:"tertiary",class:"q-mr-xs"},null,8,["rotulo"]),o.contatos[l.idContatoVendedor]?(d(),c(B,{key:0,icone:"mdi-account-tie",cor:"light",rotulo:(r=o.contatos[l.idContatoVendedor])==null?void 0:r.apelido,dica:"Vendedor(a)",class:"q-mr-xs"},null,8,["rotulo"])):g("",!0)]}),_:2},1024)]),_:2},1024),e(k,{col:"shrink"},{default:t(()=>[e(q,{inline:"",class:"float-right",text:"medium"},{default:t(()=>[e(q,{caption:"",inline:"",class:"q-mx-xs"},{default:t(()=>[n(f(i.$filters.data(l.dataHoraFinalizado)),1)]),_:2},1024),n(" "+f(i.$filters.numero(l.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024),e(k,{col:"12",class:"hideondesktop"},{default:t(()=>[e(ae,{class:"q-my-xs"})]),_:1})]),_:2},1024))),128)):g("",!0),o.dados.documentosEnvelope.length?(d(!0),z(S,{key:1},H(o.dados.documentosEnvelope,l=>(d(),c(N,{key:l.id,gutter:"none",items:"center",justify:"end"},{default:t(()=>[e(k,{col:"12 sm"},{default:t(()=>[e(q,null,{default:t(()=>{var r;return[e(w,{name:"mdi-sunglasses"}),n(" "+f(l.tipo)+" ",1),e(V,{numero:l.numero,id:l.id,cor:"positive",escuro:"",class:"q-mr-xs"},null,8,["numero","id"]),e(B,{rotulo:l.status,escuro:"",cor:"tertiary",class:"q-mr-xs"},null,8,["rotulo"]),o.contatos[l.idContatoVendedor]?(d(),c(B,{key:0,rotulo:(r=o.contatos[l.idContatoVendedor])==null?void 0:r.apelido,dica:"Vendedor(a)",icone:"mdi-account-tie",cor:"light",class:"q-mr-xs"},null,8,["rotulo"])):g("",!0),l.descricaoContato&&o.dados.fatura.idContato!==l.idContato?(d(),c(B,{key:1,rotulo:l.descricaoContato,dica:"Paciente",icone:"assignment_ind",cor:"light"},null,8,["rotulo"])):g("",!0)]}),_:2},1024)]),_:2},1024),e(k,{col:"shrink"},{default:t(()=>[e(q,{inline:"",class:"float-right",text:"medium"},{default:t(()=>[e(q,{caption:"",inline:"",class:"q-mx-xs"},{default:t(()=>[n(f(i.$filters.data(l.dataHoraFinalizado)),1)]),_:2},1024),n(" "+f(i.$filters.numero(l.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024),e(k,{col:"12",class:"hideondesktop"},{default:t(()=>[e(ae,{class:"q-my-xs"})]),_:1})]),_:2},1024))),128)):g("",!0),o.dados.carnes.length?(d(!0),z(S,{key:2},H(o.dados.carnes,l=>(d(),c(N,{key:l.id,gutter:"none",items:"center",justify:"end"},{default:t(()=>[e(k,{col:"12 sm"},{default:t(()=>[e(q,null,{default:t(()=>[e(w,{name:"mdi-file-document"}),a[27]||(a[27]=n(" Carn\xEA ")),e(V,{numero:l.numero,id:l.id,cor:"positive",escuro:"",class:"q-mr-xs"},null,8,["numero","id"]),e(B,{rotulo:l.formaDePagamento,escuro:"",cor:"tertiary"},null,8,["rotulo"])]),_:2},1024)]),_:2},1024),e(k,{col:"shrink"},{default:t(()=>[e(q,{inline:"",class:"float-right",text:"medium"},{default:t(()=>[e(q,{caption:"",inline:"",class:"q-mx-xs"},{default:t(()=>[n(f(i.$filters.data(l.dataVencimento)),1)]),_:2},1024),n(" "+f(i.$filters.numero(l.valorTotal,2)),1)]),_:2},1024)]),_:2},1024),e(k,{col:"12",class:"hideondesktop"},{default:t(()=>[e(ae,{class:"q-my-xs"})]),_:1})]),_:2},1024))),128)):g("",!0)]),_:1}),e(k,{col:"12 md3",text:"right",self:"end"},{default:t(()=>[e(Z,{onClick:p.alternarDetalhes,size:"md",color:"tertiary",class:"q-mr-sm",dense:"",round:"",flat:"",icon:o.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"]),o.podeEditar?(d(),c(Z,{key:0,onClick:p.editar,round:"",flat:"",dense:"",icon:"edit",size:"md",color:"primary",class:"q-mr-sm"},null,8,["onClick"])):g("",!0),e(Z,{icon:"print",size:"md",color:"primary",round:"",dense:"",flat:"",class:"q-mr-sm"},{default:t(()=>[e(re,null,{default:t(()=>[Y((d(),c(te,{link:"",separator:""},{default:t(()=>{var l;return[(l=o.boletos)!=null&&l.btnEmitirBoleto?(d(),c(F,{key:0,onClick:a[0]||(a[0]=r=>{var s;return p.abrirEmitirBoletos((s=o.dados)==null?void 0:s.fatura)}),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"mdi-printer"})]),_:1}),e(u,null,{default:t(()=>a[28]||(a[28]=[n("Emitir Boleto")])),_:1})]),_:1})):g("",!0),(d(!0),z(S,null,H(o.configImpressaoFatura,r=>(d(),c(F,{key:r.valor,clickable:"",onClick:s=>i.$imprimir(r.valor,(o.dados.fatura||{}).id||"0")},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"print"})]),_:1}),e(u,null,{default:t(()=>[n(f(r.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),o.sistemaPai==="optisoul"?(d(!0),z(S,{key:1},H(o.configImpressaoEnvelope,r=>(d(),c(F,{key:r.valor,onClick:s=>i.$imprimir(r.valor,(o.dados.fatura||{}).id||"0"),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"print"})]),_:1}),e(u,null,{default:t(()=>[n(f(r.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):g("",!0),(d(!0),z(S,null,H(o.configImpressaoCarne,r=>(d(),c(F,{key:r.valor,onClick:s=>i.$imprimir(r.valor,(o.dados.fatura||{}).id||"0"),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"print"})]),_:1}),e(u,null,{default:t(()=>[n(f(r.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),(d(!0),z(S,null,H(o.configImpressaoConvenio,r=>(d(),c(F,{key:r.valor,onClick:s=>i.$imprimir(r.valor,(o.dados.fatura||{}).id||"0"),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"print"})]),_:1}),e(u,null,{default:t(()=>[n(f(r.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]}),_:1})),[[ie]])]),_:1})]),_:1}),e(Z,{icon:"more_vert",size:"md",color:"tertiary",rounded:"",dense:"",flat:""},{default:t(()=>[e(re,null,{default:t(()=>[Y((d(),c(te,{link:"",separator:""},{default:t(()=>[o.dados.fatura.id?(d(),c(F,{key:0,clickable:"",onClick:a[1]||(a[1]=l=>i.$refs.documentosFiscais.emitirCupom(o.dados.fatura.id))},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"account_balance"})]),_:1}),e(u,null,{default:t(()=>a[29]||(a[29]=[n("Emitir cupom")])),_:1})]),_:1})):g("",!0),i.$utils.mapearStatus(o.dados.fatura).permiteNota?(d(),z(S,{key:1},[e(F,{onClick:a[2]||(a[2]=l=>i.emitirNFeV2({idFatura:o.dados.fatura.id},1,"Venda")),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"account_balance"})]),_:1}),e(u,null,{default:t(()=>a[30]||(a[30]=[n("NFe de Sa\xEDda/Venda")])),_:1})]),_:1}),e(F,{onClick:a[3]||(a[3]=l=>i.emitirNFeV2({idFatura:o.dados.fatura.id},0,"Devolu\xE7\xE3o")),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"account_balance"})]),_:1}),e(u,null,{default:t(()=>a[31]||(a[31]=[n("NFe de Entrada/Devolu\xE7\xE3o")])),_:1})]),_:1}),e(F,{onClick:a[4]||(a[4]=l=>i.emitirNFeV2({idFatura:o.dados.fatura.id},1,"Remessa")),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"account_balance"})]),_:1}),e(u,null,{default:t(()=>a[32]||(a[32]=[n("NFe de Remessa")])),_:1})]),_:1})],64)):g("",!0),p.mostrarOpcaoRemoverFatura?(d(),c(F,{key:2,onClick:a[5]||(a[5]=l=>p.removerFatura()),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"mdi-trash-can"})]),_:1}),e(u,null,{default:t(()=>a[33]||(a[33]=[n("Remover Fatura")])),_:1})]),_:1})):g("",!0),e(F,{onClick:a[6]||(a[6]=l=>i.$refs.modalHistoricoStatus.mostrar({idDocumento:o.dados.fatura.id})),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"history"})]),_:1}),e(u,null,{default:t(()=>a[34]||(a[34]=[n("Hist\xF3rico do Status")])),_:1})]),_:1}),o.mostrarBotaoEnviarAvaliacao&&o.dados.fatura.status==="Finalizada"?(d(),c(F,{key:3,onClick:a[7]||(a[7]=l=>p.sendReview(o.dados.fatura)),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"mdi-file-replace-outline"})]),_:1}),e(u,null,{default:t(()=>a[35]||(a[35]=[n("Enviar Avalia\xE7\xE3o")])),_:1})]),_:1})):g("",!0),o.mostrarBotaoEnviarPedidosProtheus?(d(),c(F,{key:4,onClick:a[8]||(a[8]=l=>p.enviarPedidosProtheus(o.dados.fatura.id)),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"send"})]),_:1}),e(u,null,{default:t(()=>a[36]||(a[36]=[n("Enviar Pedidos - Protheus")])),_:1})]),_:1})):g("",!0)]),_:1})),[[ie]])]),_:1})]),_:1})]),_:1})]),_:1}),o.detalhesVisivel?(d(),c(ae,{key:0,class:"q-mx-sm q-mb-xs"})):g("",!0),Y(e(N,{gutter:"sm"},{default:t(()=>[e(k,{col:"12"},{default:t(()=>[e(N,null,{default:t(()=>[e(k,{col:"xs12 sm"},{default:t(()=>[o.dados.fatura.descricaoEmpresa?(d(),c(q,{key:0,text:"sub2 medium",inline:"",icon:`business ${o.width<=992?"15px":"xs"} tertiary left`},{default:t(()=>[n(f(o.dados.fatura.descricaoEmpresa),1)]),_:1},8,["icon"])):g("",!0)]),_:1}),e(k,{col:"xs12 sm-shrink"},{default:t(()=>[e(q,{text:"sub2 medium",class:ne(`${o.width<=992?"text-left":"text-right"}`)},{default:t(()=>[a[37]||(a[37]=n(" Desconto: ")),e(q,{text:"right bold",class:"q-ml-sm float-right",style:{"min-width":"70px"}},{default:t(()=>[n(f(i.$filters.numero(o.dados.fatura.totalDesconto,2)),1)]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),e(k,{col:"12 md6",bordered:""},{default:t(()=>[e(R,{idFatura:o.dados.fatura.id,ref:"documentosFiscais"},null,8,["idFatura"])]),_:1}),e(k,{col:"12 md6",bordered:""},{default:t(()=>[o.dados.fatura.observacaoFaturamento||i.condicaoPagamentoResumo.length||o.dados.fatura.totalDesconto?(d(),c(q,{key:0,icon:`attach_money ${o.width<=992?"15px":"xs"} tertiary left`,text:"sub2 medium",class:"q-mb-md"},{default:t(()=>a[38]||(a[38]=[n(" Faturamento ")])),_:1},8,["icon"])):g("",!0),o.dados.fatura.observacaoFaturamento?(d(),c(q,{key:1,text:"sub2 regular",class:"q-mb-md q-mx-xs"},{default:t(()=>[a[39]||(a[39]=T("span",{class:"text-weight-medium q-pr-sm"},"Obs.:",-1)),n(" "+f(o.dados.fatura.observacaoFaturamento),1)]),_:1})):g("",!0),i.condicaoPagamentoResumo.length?(d(!0),z(S,{key:2},H(i.condicaoPagamentoResumo,l=>(d(),c(N,{key:l.id,class:ne(`${i.condicaoPagamentoResumo.length>1?"border-bottom":""}`),gutter:"none",items:"center",justify:"end"},{default:t(()=>[e(k,{col:"12 sm",text:"medium"},{default:t(()=>[n(f(l.formaPagamento),1)]),_:2},1024),e(k,{col:"shrink"},{default:t(()=>[e(q,{inline:"",class:"float-right",text:"medium"},{default:t(()=>[e(q,{caption:"",inline:"",class:"q-mx-xs"},{default:t(()=>[n(f(i.$filters.data(l.dataVencimento)),1)]),_:2},1024),n(" "+f(i.$filters.numero(l.valor,2))+" "+f(l.parcelas>1?`(${l.parcelas}x)`:""),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128)):g("",!0)]),_:1})]),_:1},512),[[ye,o.detalhesVisivel]])]),_:1})):g("",!0)],64)):g("",!0),_.layout==="lista"?(d(),z(S,{key:1},[o.dados.fatura.id?(d(),c(F,{key:0,clickable:"","manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:t(()=>[e(u,{class:"hideonmobile col-auto no-margin"},{default:t(()=>{var l,r,s,x,h,E;return[T("div",at,[e(V,{id:(r=(l=o.dados)==null?void 0:l.fatura)==null?void 0:r.id,numero:(x=(s=o.dados)==null?void 0:s.fatura)==null?void 0:x.numero,cor:((E=(h=o.dados)==null?void 0:h.fatura)==null?void 0:E.status)==="Finalizada"?"positive":"tertiary"},null,8,["id","numero","cor"])])]}),_:1}),e(u,{class:"col-md col-lg col-xl no-margin"},{default:t(()=>[e(F,{class:"q-pa-none"},{default:t(()=>[e(u,{onClick:a[9]||(a[9]=l=>p.editar()),class:"col-auto items-center"},{default:t(()=>{var l,r,s,x,h;return[e(Q,{imagem:(s=o.contatos[(r=(l=o.dados)==null?void 0:l.fatura)==null?void 0:r.idContato]||{})==null?void 0:s.imagem,tamanho:"40",rotulo:(h=(x=o.dados)==null?void 0:x.fatura)==null?void 0:h.descricaoContato,style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])]}),_:1}),e(u,{onClick:a[10]||(a[10]=l=>p.editar()),class:"col"},{default:t(()=>{var l,r,s,x,h,E;return[e(v,{lines:"2",class:"text-weight-bold"},{default:t(()=>{var P,D,A;return[T("span",null,[n(f((A=o.contatos[(D=(P=o.dados)==null?void 0:P.fatura)==null?void 0:D.idContato]||{})==null?void 0:A.apelido)+" ",1),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>a[40]||(a[40]=[n("Cliente")])),_:1})])]}),_:1}),e(v,{caption:"",class:"hideondesktop"},{default:t(()=>{var P,D,A,K,U,O;return[e(V,{id:(D=(P=o.dados)==null?void 0:P.fatura)==null?void 0:D.id,numero:(K=(A=o.dados)==null?void 0:A.fatura)==null?void 0:K.numero,cor:((O=(U=o.dados)==null?void 0:U.fatura)==null?void 0:O.status)==="Finalizada"?"positive":"tertiary",class:"q-mr-sm"},null,8,["id","numero","cor"])]}),_:1}),o.contatos[o.dados.fatura.idEmpresa]?(d(),c(v,{key:0,caption:"",lines:"2"},{default:t(()=>{var P,D;return[T("span",null,[e(w,{name:"business"}),n(" "+f(((P=o.contatos[o.dados.fatura.idEmpresa])==null?void 0:P.apelido)||((D=o.contatos[o.dados.fatura.idEmpresa])==null?void 0:D.nome))+" ",1),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>a[41]||(a[41]=[n(" Empresa ")])),_:1})])]}),_:1})):g("",!0),((s=(r=(l=o.dados)==null?void 0:l.fatura)==null?void 0:r.vendedores)==null?void 0:s.filter(Boolean).length)||((E=(h=(x=o.dados)==null?void 0:x.fatura)==null?void 0:h.digitadores)==null?void 0:E.filter(Boolean).length)?(d(),c(v,{key:1,caption:"",lines:"2"},{default:t(()=>{var P,D,A,K,U,O,$,ee,ue,me,fe,ce,pe,ge,be;return[e(w,{name:"mdi-account-tie",style:{"margin-right":"2px"}}),(A=(D=(P=o.dados)==null?void 0:P.fatura)==null?void 0:D.vendedores)!=null&&A.filter(Boolean).length?(d(),z("span",it,[n(f((O=(U=(K=o.dados)==null?void 0:K.fatura)==null?void 0:U.vendedores)==null?void 0:O.map(J=>{var M;return(M=o.contatos[J])==null?void 0:M.apelido}).filter(Boolean).join(", "))+" ",1),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>{var J,M,W;return[n(f(((W=(M=(J=o.dados)==null?void 0:J.fatura)==null?void 0:M.vendedores)==null?void 0:W.length)>1?"Vendedores":"Vendedor"),1)]}),_:1})])):g("",!0),((ue=(ee=($=o.dados)==null?void 0:$.fatura)==null?void 0:ee.digitadores)==null?void 0:ue.filter(Boolean).length)&&((ce=(fe=(me=o.dados)==null?void 0:me.fatura)==null?void 0:fe.digitadores)==null?void 0:ce.some(J=>{var M,W,le;return!((le=(W=(M=o.dados)==null?void 0:M.fatura)==null?void 0:W.vendedores)!=null&&le.includes(J))}))?(d(),z("span",lt,[n(" | "+f((be=(ge=(pe=o.dados)==null?void 0:pe.fatura)==null?void 0:ge.digitadores)==null?void 0:be.filter(J=>{var M,W,le;return!((le=(W=(M=o.dados)==null?void 0:M.fatura)==null?void 0:W.vendedores)!=null&&le.includes(J))}).map(J=>{var M;return(M=o.contatos[J])==null?void 0:M.apelido}).filter(Boolean).join(", "))+" ",1),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>{var J,M,W;return[n(f(((W=(M=(J=o.dados)==null?void 0:J.fatura)==null?void 0:M.digitadores)==null?void 0:W.length)>1?"Digitadores":"Digitador"),1)]}),_:1})])):g("",!0)]}),_:1})):g("",!0),e(u,{class:"hideondesktop q-mt-sm"},{default:t(()=>[e(F,{class:"q-pa-none",style:{"min-height":"36px!important"}},{default:t(()=>[e(u,{top:"",class:"col-5 no-margin"},{default:t(()=>{var P,D,A,K;return[(D=(P=o.dados)==null?void 0:P.fatura)!=null&&D.dataHoraEmissao?(d(),c(v,{key:0,caption:""},{default:t(()=>{var U,O;return[e(w,{name:"mdi-calendar-today",style:{position:"absolute","margin-top":"2px"}}),T("span",st,f(i.$filters.data((O=(U=o.dados)==null?void 0:U.fatura)==null?void 0:O.dataHoraEmissao)),1)]}),_:1})):g("",!0),(K=(A=o.dados)==null?void 0:A.fatura)!=null&&K.dataHoraFinalizado?(d(),c(v,{key:1,caption:""},{default:t(()=>{var U,O;return[e(w,{name:"mdi-calendar",style:{position:"absolute","margin-top":"2px"}}),T("span",rt,f(i.$filters.data((O=(U=o.dados)==null?void 0:U.fatura)==null?void 0:O.dataHoraFinalizado)),1)]}),_:1})):g("",!0)]}),_:1}),e(u,{top:"",class:"col-7 no-margin text-right"},{default:t(()=>{var P,D,A,K,U,O;return[(D=(P=o.dados)==null?void 0:P.fatura)!=null&&D.totalDocumento?(d(),c(v,{key:0,caption:"",class:"text-weight-bold"},{default:t(()=>{var $,ee;return[n(f(i.$filters.numero((ee=($=o.dados)==null?void 0:$.fatura)==null?void 0:ee.totalDocumento,2)),1)]}),_:1})):g("",!0),((K=(A=o.dados)==null?void 0:A.fatura)==null?void 0:K.subTotal)!==((O=(U=o.dados)==null?void 0:U.fatura)==null?void 0:O.totalDocumento)?(d(),c(v,{key:1,caption:""},{default:t(()=>{var $,ee;return[n(f(i.$filters.numero((ee=($=o.dados)==null?void 0:$.fatura)==null?void 0:ee.subTotal,2)),1)]}),_:1})):g("",!0)]}),_:1})]),_:1})]),_:1})]}),_:1})]),_:1})]),_:1}),e(u,{onClick:a[11]||(a[11]=l=>p.editar()),class:"hideonmobile maxw100 q-pl-sm no-margin"},{default:t(()=>{var l,r,s,x;return[(r=(l=o.dados)==null?void 0:l.fatura)!=null&&r.dataHoraEmissao?(d(),c(v,{key:0,caption:"",class:"text-weight-medium"},{default:t(()=>{var h,E;return[T("span",null,[e(w,{name:"mdi-calendar-today"}),n(" "+f(i.$filters.data((E=(h=o.dados)==null?void 0:h.fatura)==null?void 0:E.dataHoraEmissao))+" ",1),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>{var P,D;return[n(" Emitido \xE0s "+f(i.$filters.hora((D=(P=o.dados)==null?void 0:P.fatura)==null?void 0:D.dataHoraEmissao)),1)]}),_:1})])]}),_:1})):g("",!0),(x=(s=o.dados)==null?void 0:s.fatura)!=null&&x.dataHoraFinalizado?(d(),c(v,{key:1,caption:"",class:"text-weight-medium"},{default:t(()=>{var h,E;return[T("span",null,[e(w,{name:"mdi-calendar"}),n(" "+f(i.$filters.data((E=(h=o.dados)==null?void 0:h.fatura)==null?void 0:E.dataHoraFinalizado))+" ",1),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>{var P,D;return[n(" Finalizado \xE1s "+f(i.$filters.hora((D=(P=o.dados)==null?void 0:P.fatura)==null?void 0:D.dataHoraFinalizado)),1)]}),_:1})])]}),_:1})):g("",!0)]}),_:1}),e(u,{onClick:a[12]||(a[12]=l=>p.editar()),class:"hideonmobile maxw120 q-pl-sm no-margin"},{default:t(()=>{var l,r,s,x;return[(r=(l=o.dados)==null?void 0:l.fatura)!=null&&r.totalDocumento?(d(),c(v,{key:0,class:"text-weight-bold text-right"},{default:t(()=>{var h,E;return[T("span",null,[n(f(i.$filters.numero((E=(h=o.dados)==null?void 0:h.fatura)==null?void 0:E.totalDocumento,2))+" ",1),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>a[42]||(a[42]=[n(" Total ")])),_:1})])]}),_:1})):g("",!0),(x=(s=o.dados)==null?void 0:s.fatura)!=null&&x.subTotal?(d(),c(v,{key:1,class:"text-caption text-right"},{default:t(()=>{var h,E;return[T("span",null,[n(f(i.$filters.numero((E=(h=o.dados)==null?void 0:h.fatura)==null?void 0:E.subTotal,2))+" ",1),e(G,{anchor:"bottom middle",self:"center middle"},{default:t(()=>a[43]||(a[43]=[n(" Subtotal ")])),_:1})])]}),_:1})):g("",!0)]}),_:1}),e(u,{class:"col-auto q-pl-sm no-margin"},{default:t(()=>[e(F,{class:"q-pa-none"},{default:t(()=>[e(u,{class:"hideonmobile no-margin"},{default:t(()=>[e(Z,{onClick:a[13]||(a[13]=l=>{var r,s;return p.alternarDetalhes((s=(r=o.dados)==null?void 0:r.fatura)==null?void 0:s.id)}),round:"",flat:"",dense:"",size:"md",color:"tertiary",icon:o.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["icon"])]),_:1}),e(u,{class:"hideonmobile no-margin"},{default:t(()=>[o.podeEditar?(d(),c(Z,{key:0,onClick:a[14]||(a[14]=l=>p.editar()),icon:"edit",size:"md",color:"primary",round:"",flat:"",dense:""})):g("",!0)]),_:1}),e(u,{class:"hideonmobile no-margin"},{default:t(()=>[e(Z,{icon:"print",size:"md",round:"",flat:"",dense:"",class:"hideonmobile"},{default:t(()=>[e(re,null,{default:t(()=>[Y((d(),c(te,{link:"","no-border":"",separator:""},{default:t(()=>{var l;return[(l=o.boletos)!=null&&l.btnEmitirBoleto?(d(),c(F,{key:0,onClick:a[15]||(a[15]=r=>{var s;return p.abrirEmitirBoletos((s=o.dados)==null?void 0:s.fatura)}),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"mdi-printer"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>a[44]||(a[44]=[n("Emitir Boleto")])),_:1})]),_:1})]),_:1})):g("",!0),(d(!0),z(S,null,H(o.configImpressaoFatura,r=>(d(),c(F,{key:r.valor,onClick:s=>i.$imprimir(r.valor,(o.dados.fatura||{}).id||"0"),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"print"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[n(f(r.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),o.sistemaPai==="optisoul"?(d(!0),z(S,{key:1},H(o.configImpressaoEnvelope,r=>(d(),c(F,{clickable:"",key:r.valor,onClick:s=>i.$imprimir(r.valor,(o.dados.fatura||{}).id||"0")},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"print"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[n(f(r.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):g("",!0),(d(!0),z(S,null,H(o.configImpressaoCarne,r=>(d(),c(F,{key:r.valor,onClick:s=>i.$imprimir(r.valor,(o.dados.fatura||{}).id||"0"),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"print"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[n(f(r.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),(d(!0),z(S,null,H(o.configImpressaoConvenio,r=>(d(),c(F,{key:r.valor,onClick:s=>i.$imprimir(r.valor,(o.dados.fatura||{}).id||"0"),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"print"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[n(f(r.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]}),_:1})),[[ie]])]),_:1})]),_:1})]),_:1}),e(u,{class:"no-margin"},{default:t(()=>[e(Z,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:t(()=>[e(re,null,{default:t(()=>[Y((d(),c(te,{link:"","no-border":"",separator:""},{default:t(()=>{var l;return[o.podeEditar?(d(),c(F,{key:0,onClick:a[16]||(a[16]=r=>p.editar()),clickable:"",class:"hideondesktop"},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"edit"})]),_:1}),e(u,null,{default:t(()=>a[45]||(a[45]=[n(" Editar ")])),_:1})]),_:1})):g("",!0),e(F,{onClick:a[17]||(a[17]=r=>{var s,x;return p.alternarDetalhes((x=(s=o.dados)==null?void 0:s.fatura)==null?void 0:x.id)}),clickable:"",class:"hideondesktop"},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:o.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:1}),e(u,null,{default:t(()=>a[46]||(a[46]=[n(" Detalhes ")])),_:1})]),_:1}),o.dados.fatura.id?(d(),c(F,{key:1,clickable:"",onClick:a[18]||(a[18]=r=>i.$refs.documentosFiscais.emitirCupom(o.dados.fatura.id))},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"account_balance"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>a[47]||(a[47]=[n("Emitir cupom")])),_:1})]),_:1})]),_:1})):g("",!0),i.$utils.mapearStatus(o.dados.fatura).permiteNota?(d(),c(F,{key:2,clickable:"",onClick:a[19]||(a[19]=r=>i.emitirNFeV2({idFatura:o.dados.fatura.id},1,"Venda"))},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"account_balance"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>a[48]||(a[48]=[n("NFe de Sa\xEDda/Venda")])),_:1})]),_:1})]),_:1})):g("",!0),i.$utils.mapearStatus(o.dados.fatura).permiteNota?(d(),c(F,{key:3,clickable:"",onClick:a[20]||(a[20]=r=>i.emitirNFeV2({idFatura:o.dados.fatura.id},0,"Devolu\xE7\xE3o"))},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"account_balance"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>a[49]||(a[49]=[n("NFe de Entrada/Devolu\xE7\xE3o")])),_:1})]),_:1})]),_:1})):g("",!0),i.$utils.mapearStatus(o.dados.fatura).permiteNota?(d(),c(F,{key:4,clickable:"",onClick:a[21]||(a[21]=r=>i.emitirNFeV2({idFatura:o.dados.fatura.id},1,"Remessa"))},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"account_balance"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>a[50]||(a[50]=[n("NFe de Remessa")])),_:1})]),_:1})]),_:1})):g("",!0),p.mostrarOpcaoRemoverFatura?(d(),c(F,{key:5,clickable:"",onClick:a[22]||(a[22]=r=>p.removerFatura())},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"mdi-trash-can"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>a[51]||(a[51]=[n("Remover Fatura")])),_:1})]),_:1})]),_:1})):g("",!0),e(F,{clickable:"",onClick:a[23]||(a[23]=r=>i.$refs.modalHistoricoStatus.mostrar({idDocumento:o.dados.fatura.id}))},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"history"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>a[52]||(a[52]=[n("Hist\xF3rico do Status")])),_:1})]),_:1})]),_:1}),o.mostrarBotaoEnviarAvaliacao&&o.dados.fatura.status==="Finalizada"?(d(),c(F,{key:6,onClick:a[24]||(a[24]=r=>p.sendReview(o.dados.fatura)),clickable:""},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"mdi-file-replace-outline"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>a[53]||(a[53]=[n("Enviar Avalia\xE7\xE3o")])),_:1})]),_:1})]),_:1})):g("",!0),(l=o.boletos)!=null&&l.btnEmitirBoleto?(d(),c(F,{key:7,clickable:"",onClick:a[25]||(a[25]=r=>{var s;return p.abrirEmitirBoletos((s=o.dados)==null?void 0:s.fatura)}),class:"hideondesktop"},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"mdi-printer"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>a[54]||(a[54]=[n("Emitir Boleto")])),_:1})]),_:1})]),_:1})):g("",!0),(d(!0),z(S,null,H(o.configImpressaoFatura,r=>(d(),c(F,{key:r.valor,onClick:s=>i.$imprimir(r.valor,(o.dados.fatura||{}).id||"0"),clickable:"",class:"hideondesktop"},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"print"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[n(f(r.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),o.sistemaPai==="optisoul"?(d(!0),z(S,{key:8},H(o.configImpressaoEnvelope,r=>(d(),c(F,{clickable:"",class:"hideondesktop",key:r.valor,onClick:s=>i.$imprimir(r.valor,(o.dados.fatura||{}).id||"0")},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"print"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[n(f(r.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):g("",!0),(d(!0),z(S,null,H(o.configImpressaoCarne,r=>(d(),c(F,{key:r.valor,onClick:s=>i.$imprimir(r.valor,(o.dados.fatura||{}).id||"0"),clickable:"",class:"hideondesktop"},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"print"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[n(f(r.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),(d(!0),z(S,null,H(o.configImpressaoConvenio,r=>(d(),c(F,{key:r.valor,onClick:s=>i.$imprimir(r.valor,(o.dados.fatura||{}).id||"0"),clickable:"",class:"hideondesktop"},{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(w,{name:"print"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[n(f(r.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]}),_:1})),[[ie]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):g("",!0),Y(e(N,{gutter:"md-x lg-y"},{default:t(()=>[o.dados.fatura.totalDesconto?(d(),c(k,{key:0,col:"xs12"},{default:t(()=>[e(q,{class:ne([`${o.width<=992?"text-left":"text-right"}`,"q-pr-sm"]),text:"sub2 regular"},{default:t(()=>[a[55]||(a[55]=n(" Desconto: ")),T("span",nt,f(i.$filters.numero(o.dados.fatura.totalDesconto,2)),1)]),_:1},8,["class"])]),_:1})):g("",!0),e(k,{col:"xs12 md6",bordered:""},{default:t(()=>[o.dados.fatura.observacaoFaturamento||i.condicaoPagamentoResumo.length||o.dados.fatura.totalDesconto?(d(),c(q,{key:0,icon:`attach_money ${o.width<=992?"15px":"xs"} tertiary left`,text:"sub2 medium",class:"q-mb-md"},{default:t(()=>a[56]||(a[56]=[n(" Faturamento ")])),_:1},8,["icon"])):g("",!0),o.dados.fatura.observacaoFaturamento?(d(),c(q,{key:1,text:"sub2 regular",class:"q-mb-md q-mx-xs"},{default:t(()=>[a[57]||(a[57]=T("span",{class:"text-weight-medium q-pr-sm"},"Obs.:",-1)),n(" "+f(o.dados.fatura.observacaoFaturamento),1)]),_:1})):g("",!0),i.condicaoPagamentoResumo.length?(d(),c(te,{key:2},{default:t(()=>[(d(!0),z(S,null,H(i.condicaoPagamentoResumo,l=>(d(),c(F,{key:l.id,class:ne([`${i.condicaoPagamentoResumo.length>1?"border-bottom":""}`,"q-px-sm q-py-none q-mb-md"])},{default:t(()=>[e(u,null,{default:t(()=>[e(v,{class:"text-weight-medium"},{default:t(()=>[n(f(l.formaPagamento),1)]),_:2},1024),e(u,{class:"hideondesktop"},{default:t(()=>[e(F,{class:"q-pa-none"},{default:t(()=>[e(u,{class:"maxw80 no-margin"},{default:t(()=>[e(v,{caption:"",class:"text-weight-medium"},{default:t(()=>[n(f(i.$filters.data(l.dataVencimento)),1)]),_:2},1024),e(v,{caption:""},{default:t(()=>[n(f(i.$filters.hora(l.dataVencimento)),1)]),_:2},1024)]),_:2},1024),e(u,{class:"no-margin"},{default:t(()=>[e(v,{class:"text-right text-weight-medium"},{default:t(()=>[n(f(i.$filters.numero(l.valor,2)),1)]),_:2},1024),l.parcelas?(d(),c(v,{key:0,caption:"",class:"text-right"},{default:t(()=>[n(f(l.parcelas>1?`(${l.parcelas}x)`:""),1)]),_:2},1024)):g("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(u,{class:"maxw80 no-margin hideonmobile"},{default:t(()=>[e(v,{class:"text-weight-medium"},{default:t(()=>[n(f(i.$filters.data(l.dataVencimento)),1)]),_:2},1024),e(v,{caption:""},{default:t(()=>[n(f(i.$filters.hora(l.dataVencimento)),1)]),_:2},1024)]),_:2},1024),e(u,{class:"maxw100 no-margin hideonmobile"},{default:t(()=>[e(v,{class:"text-right text-weight-medium"},{default:t(()=>[n(f(i.$filters.numero(l.valor,2)),1)]),_:2},1024),l.parcelas?(d(),c(v,{key:0,caption:"",class:"text-right"},{default:t(()=>[n(f(l.parcelas>1?`(${l.parcelas}x)`:""),1)]),_:2},1024)):g("",!0)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})):g("",!0)]),_:1}),e(k,{col:"xs12 md6",bordered:""},{default:t(()=>[e(R,{idFatura:o.dados.fatura.id,ref:"documentosFiscais"},null,8,["idFatura"])]),_:1})]),_:1},512),[[ye,o.dados.fatura.id&&o.detalhesVisivel]]),o.dados.fatura.id?(d(),c(ae,{key:1})):g("",!0)],64)):g("",!0),e(L,{onExecutar:p.executar,ref:"faturaModal"},null,8,["onExecutar"]),e(C,{ref:"modalHistoricoStatus"},null,512),e(I,{onFechar:p.fechouNFe},null,8,["onFechar"]),e(y,{modelValue:o.boletos.visivel,"onUpdate:modelValue":a[26]||(a[26]=l=>o.boletos.visivel=l),fatura:o.boletos.fatura},null,8,["modelValue","fatura"])])}var bt=_e(tt,[["render",dt]]);export{bt as F};
